!function(){"use strict";var t=window.Vec2=function(t,i){this.x=t,this.y=i};t.prototype={init:function(t,i){return this.x=t,this.y=i,this},initFrom:function(t){return this.x=t.x,this.y=t.y,this},initFromBuffer:function(t,i){return i=i||0,this.x=t[i],this.y=t[i+1],this},clone:function(){return new t(this.x,this.y)},copy:function(t,i){i=+i,t[i]=this.x,t[i+1]=this.y},equals:function(t){return this.x===t.x&&this.y===t.y},length:function(){var t=this.x,i=this.y;return Math.sqrt(t*t+i*i)},lengthSquared:function(){var t=this.x,i=this.y;return t*t+i*i},distance:function(t){var i=this.x-t.x,n=this.y-t.y;return Math.sqrt(i*i+n*n)},distanceSquared:function(t){var i=this.x-t.x,n=this.y-t.y;return i*i+n*n},dot:function(t){return this.x*t.x+this.y*t.y},selfNormalize:function(){var t=this.x,i=this.y,n=1/Math.sqrt(t*t+i*i);return this.x*=n,this.y*=n,this},selfInvert:function(){return this.x=1/this.x,this.y=1/this.y,this},selfNegate:function(){return this.x=-this.x,this.y=-this.y,this},selfAdd:function(t){return this.x+=t.x,this.y+=t.y,this},selfAddScalar:function(t){return this.x+=t,this.y+=t,this},selfSubtract:function(t){return this.x-=t.x,this.y-=t.y,this},selfSubtractScalar:function(t){return this.x-=t,this.y-=t,this},selfMultiply:function(t){return this.x*=t.x,this.y*=t.y,this},selfMultiplyScalar:function(t){return this.x*=t,this.y*=t,this},selfDivide:function(t){return this.x/=t.x,this.y/=t.y,this},selfDivideScalar:function(t){return this.x/=t,this.y/=t,this},selfMultiplyAdd:function(t,i){return this.x=this.x*t.x+i.x,this.y=this.y*t.y+i.y,this},selfMultiplyScalarAdd:function(t,i){return this.x=this.x*t+i.x,this.y=this.y*t+i.y,this}},t.create=function(i,n){return void 0!==i?new t(i,n):new t(0,0)},t.zero=function(){return new t(0,0)},t.one=function(){return new t(1,1)},t.normalize=function(i,n){var r=i.x,s=i.y,e=1/Math.sqrt(r*r+s*s);return n=n||new t,n.x=r*e,n.y=s*e,n},t.invert=function(i,n){return n=n||new t,n.x=1/i.x,n.y=1/i.y,n},t.negate=function(i,n){return n=n||new t,n.x=-i.x,n.y=-i.y,n},t.add=function(i,n,r){return r=r||new t,r.x=i.x+n.x,r.y=i.y+n.y,r},t.addScalar=function(i,n,r){return r=r||new t,r.x=i.x+n,r.y=i.y+n,r},t.subtract=function(i,n,r){return r=r||new t,r.x=i.x-n.x,r.y=i.y-n.y,r},t.subtractScalar=function(i,n,r){return r=r||new t,r.x=i.x-n,r.y=i.y-n,r},t.multiply=function(i,n,r){return r=r||new t,r.x=i.x*n.x,r.y=i.y*n.y,r},t.multiplyScalar=function(i,n,r){return r=r||new t,r.x=i.x*n,r.y=i.y*n,r},t.divide=function(i,n,r){return r=r||new t,r.x=i.x/n.x,r.y=i.y/n.y,r},t.divideScalar=function(i,n,r){return r=r||new t,r.x=i.x/n,r.y=i.y/n,r},t.multiplyAdd=function(i,n,r,s){return s=s||new t,s.x=i.x*n.x+r.x,s.y=i.y*n.y+r.y,s},t.multiplyScalarAdd=function(i,n,r,s){return s=s||new t,s.x=i.x*n+r.x,s.y=i.y*n+r.y,s},t.clamp=function(i,n,r,s){var e=i.x,h=i.y,a=n.x,u=n.y,o=r.x,c=r.y;return s=s||new t,s.x=a>e?a:e>o?o:e,s.y=u>h?u:h>c?c:h,s},t.clampScalar=function(i,n,r,s){var e=i.x,h=i.y;return s=s||new t,s.x=n>e?n:e>r?r:e,s.y=n>h?n:h>r?r:h,s},t.min=function(i,n,r){var s=i.x,e=i.y,h=n.x,a=n.y;return r=r||new t,r.x=h>s?s:h,r.y=a>e?e:a,r},t.minScalar=function(i,n,r){var s=i.x,e=i.y;return r=r||new t,r.x=n>s?s:n,r.y=n>e?e:n,r},t.max=function(i,n,r){var s=i.x,e=i.y,h=n.x,a=n.y;return r=r||new t,r.x=s>h?s:h,r.y=e>a?e:a,r},t.maxScalar=function(i,n,r){var s=i.x,e=i.y;return r=r||new t,r.x=s>n?s:n,r.y=e>n?e:n,r},t.lerp=function(i,n,r,s){var e=i.x,h=i.y;return s=s||new t,s.x=e+(n.x-e)*r,s.y=h+(n.y-h)*r,s},t.barycentric=function(i,n,r,s,e,h){var a=i.x,u=i.y;return h=h||new t,h.x=a+s*(n.x-a)+e*(r.x-a),h.y=u+s*(n.y-u)+e*(r.y-u),h},t.smooth=function(i,n,r,s){r=r>1?1:0>r?0:r,r=r*r*(3-2*r);var e=i.x,h=i.y;return s=s||new t,s.x=e+(n.x-e)*r,s.y=h+(n.y-h)*r,s},t.convert=function(i){return Array.isArray(i)?new t(i[0]||0,i[1]||0):"number"==typeof i?new t(i,i):new t(i.x||0,i.y||0)}}(),function(){"use strict";var t=window.Vec3=function(t,i,n){this.x=t,this.y=i,this.z=n};t.prototype={init:function(t,i,n){return this.x=t,this.y=i,this.z=n,this},initFrom:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},initFromBuffer:function(t,i){return i=i||0,this.x=t[i],this.y=t[i+1],this.z=t[i+2],this},clone:function(){return new t(this.x,this.y,this.z)},copy:function(t,i){i=+i,t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},length:function(){var t=this.x,i=this.y,n=this.z;return Math.sqrt(t*t+i*i+n*n)},lengthSquared:function(){var t=this.x,i=this.y,n=this.z;return t*t+i*i+n*n},distance:function(t){var i=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(i*i+n*n+r*r)},distanceSquared:function(t){var i=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return i*i+n*n+r*r},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},selfNormalize:function(){var t=this.x,i=this.y,n=this.z,r=1/Math.sqrt(t*t+i*i+n*n);return this.x*=r,this.y*=r,this.z*=r,this},selfInvert:function(){return this.x=1/this.x,this.y=1/this.y,this.z=1/this.z,this},selfNegate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},selfCross:function(t){var i=this.y*t.z-this.z*t.y,n=this.z*t.x-this.x*t.z,r=this.x*t.y-this.y*t.x;return this.x=i,this.y=n,this.z=r,this},selfAdd:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},selfAddScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},selfSubtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},selfSubtractScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},selfMultiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this},selfMultiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},selfDivide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},selfDivideScalar:function(t){return this.x/=t,this.y/=t,this.z/=t,this},selfMultiplyAdd:function(t,i){return this.x=this.x*t.x+i.x,this.y=this.y*t.y+i.y,this.z=this.z*t.z+i.z,this},selfMultiplyScalarAdd:function(t,i){return this.x=this.x*t+i.x,this.y=this.y*t+i.y,this.z=this.z*t+i.z,this}},t.create=function(i,n,r){return void 0!==i?new t(i,n,r):new t(0,0,0)},t.zero=function(){return new t(0,0,0)},t.one=function(){return new t(1,1,1)},t.normalize=function(i,n){var r=i.x,s=i.y,e=i.z,h=1/Math.sqrt(r*r+s*s+e*e);return n=n||new t,n.x=r*h,n.y=s*h,n.z=e*h,n},t.invert=function(i,n){return n=n||new t,n.x=1/i.x,n.y=1/i.y,n.z=1/i.z,n},t.negate=function(i,n){return n=n||new t,n.x=-i.x,n.y=-i.y,n.z=-i.z,n},t.cross=function(i,n,r){var s=i.y*n.z-i.z*n.y,e=i.z*n.x-i.x*n.z,h=i.x*n.y-i.y*n.x;return r=r||new t,r.x=s,r.y=e,r.z=h,r},t.add=function(i,n,r){return r=r||new t,r.x=i.x+n.x,r.y=i.y+n.y,r.z=i.z+n.z,r},t.addScalar=function(i,n,r){return r=r||new t,r.x=i.x+n,r.y=i.y+n,r.z=i.z+n,r},t.subtract=function(i,n,r){return r=r||new t,r.x=i.x-n.x,r.y=i.y-n.y,r.z=i.z-n.z,r},t.subtractScalar=function(i,n,r){return r=r||new t,r.x=i.x-n,r.y=i.y-n,r.z=i.z-n,r},t.multiply=function(i,n,r){return r=r||new t,r.x=i.x*n.x,r.y=i.y*n.y,r.z=i.z*n.z,r},t.multiplyScalar=function(i,n,r){return r=r||new t,r.x=i.x*n,r.y=i.y*n,r.z=i.z*n,r},t.divide=function(i,n,r){return r=r||new t,r.x=i.x/n.x,r.y=i.y/n.y,r.z=i.z/n.z,r},t.divideScalar=function(i,n,r){return r=r||new t,r.x=i.x/n,r.y=i.y/n,r.z=i.z/n,r},t.multiplyAdd=function(i,n,r,s){return s=s||new t,s.x=i.x*n.x+r.x,s.y=i.y*n.y+r.y,s.z=i.z*n.z+r.z,s},t.multiplyScalarAdd=function(i,n,r,s){return s=s||new t,s.x=i.x*n+r.x,s.y=i.y*n+r.y,s.z=i.z*n+r.z,s},t.clamp=function(i,n,r,s){var e=i.x,h=i.y,a=i.z,u=n.x,o=n.y,c=n.z,y=r.x,x=r.y,f=r.z;return s=s||new t,s.x=u>e?u:e>y?y:e,s.y=o>h?o:h>x?x:h,s.z=c>a?c:a>f?f:a,s},t.clampScalar=function(i,n,r,s){var e=i.x,h=i.y,a=i.z;return s=s||new t,s.x=n>e?n:e>r?r:e,s.y=n>h?n:h>r?r:h,s.z=n>a?n:a>r?r:a,s},t.min=function(i,n,r){var s=i.x,e=i.y,h=i.z,a=n.x,u=n.y,o=n.z;return r=r||new t,r.x=a>s?s:a,r.y=u>e?e:u,r.z=o>h?h:o,r},t.minScalar=function(i,n,r){var s=i.x,e=i.y,h=i.z;return r=r||new t,r.x=n>s?s:n,r.y=n>e?e:n,r.z=n>h?h:n,r},t.max=function(i,n,r){var s=i.x,e=i.y,h=i.z,a=n.x,u=n.y,o=n.z;return r=r||new t,r.x=s>a?s:a,r.y=e>u?e:u,r.z=h>o?h:o,r},t.maxScalar=function(i,n,r){var s=i.x,e=i.y,h=i.z;return r=r||new t,r.x=s>n?s:n,r.y=e>n?e:n,r.z=h>n?h:n,r},t.lerp=function(i,n,r,s){var e=i.x,h=i.y,a=i.z;return s=s||new t,s.x=e+(n.x-e)*r,s.y=h+(n.y-h)*r,s.z=a+(n.z-a)*r,s},t.barycentric=function(i,n,r,s,e,h){var a=i.x,u=i.y,o=i.z;return h=h||new t,h.x=a+s*(n.x-a)+e*(r.x-a),h.y=u+s*(n.y-u)+e*(r.y-u),h.z=o+s*(n.z-o)+e*(r.z-o),h},t.smooth=function(i,n,r,s){r=r>1?1:0>r?0:r,r=r*r*(3-2*r);var e=i.x,h=i.y,a=i.z;return s=s||new t,s.x=e+(n.x-e)*r,s.y=h+(n.y-h)*r,s.z=a+(n.z-a)*r,s},t.convert=function(i){return Array.isArray(i)?new t(i[0]||0,i[1]||0,i[2]||0):"number"==typeof i?new t(i,i,i):new t(i.x||0,i.y||0,i.z||0)}}(),function(){"use strict";var t=window.Vec4=function(t,i,n,r){this.x=t,this.y=i,this.z=n,this.w=r};t.prototype={init:function(t,i,n,r){return this.x=t,this.y=i,this.z=n,this.w=r,this},initFrom:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},initFromBuffer:function(t,i){return i=i||0,this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this},clone:function(){return new t(this.x,this.y,this.z,this.w)},copy:function(t,i){i=+i,t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},length:function(){var t=this.x,i=this.y,n=this.z,r=this.w;return Math.sqrt(t*t+i*i+n*n+r*r)},lengthSquared:function(){var t=this.x,i=this.y,n=this.z,r=this.w;return t*t+i*i+n*n+r*r},distance:function(t){var i=this.x-t.x,n=this.y-t.y,r=this.z-t.z,s=this.w-t.w;return Math.sqrt(i*i+n*n+r*r+s*s)},distanceSquared:function(t){var i=this.x-t.x,n=this.y-t.y,r=this.z-t.z,s=this.w-t.w;return i*i+n*n+r*r+s*s},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},selfNormalize:function(){var t=this.x,i=this.y,n=this.z,r=this.w,s=1/Math.sqrt(t*t+i*i+n*n+r*r);return this.x*=s,this.y*=s,this.z*=s,this.w*=s,this},selfInvert:function(){return this.x=1/this.x,this.y=1/this.y,this.z=1/this.z,this.w=1/this.w,this},selfNegate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},selfAdd:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},selfAddScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},selfSubtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},selfSubtractScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},selfMultiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this},selfMultiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},selfDivide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this},selfDivideScalar:function(t){return this.x/=t,this.y/=t,this.z/=t,this.w/=t,this},selfMultiplyAdd:function(t,i){return this.x=this.x*t.x+i.x,this.y=this.y*t.y+i.y,this.z=this.z*t.z+i.z,this.w=this.w*t.w+i.w,this},selfMultiplyScalarAdd:function(t,i){return this.x=this.x*t+i.x,this.y=this.y*t+i.y,this.z=this.z*t+i.z,this.w=this.w*t+i.w,this}},t.create=function(i,n,r,s){return void 0!==i?new t(i,n,r,s):new t(0,0,0,0)},t.zero=function(){return new t(0,0,0,0)},t.one=function(){return new t(1,1,1,1)},t.normalize=function(i,n){var r=i.x,s=i.y,e=i.z,h=i.w,a=1/Math.sqrt(r*r+s*s+e*e+h*h);return n=n||new t,n.x=r*a,n.y=s*a,n.z=e*a,n.w=h*a,n},t.invert=function(i,n){return n=n||new t,n.x=1/i.x,n.y=1/i.y,n.z=1/i.z,n.w=1/i.w,n},t.negate=function(i,n){return n=n||new t,n.x=-i.x,n.y=-i.y,n.z=-i.z,n.w=-i.w,n},t.add=function(i,n,r){return r=r||new t,r.x=i.x+n.x,r.y=i.y+n.y,r.z=i.z+n.z,r.w=i.w+n.w,r},t.addScalar=function(i,n,r){return r=r||new t,r.x=i.x+n,r.y=i.y+n,r.z=i.z+n,r.w=i.w+n,r},t.subtract=function(i,n,r){return r=r||new t,r.x=i.x-n.x,r.y=i.y-n.y,r.z=i.z-n.z,r.w=i.w-n.w,r},t.subtractScalar=function(i,n,r){return r=r||new t,r.x=i.x-n,r.y=i.y-n,r.z=i.z-n,r.w=i.w-n,r},t.multiply=function(i,n,r){return r=r||new t,r.x=i.x*n.x,r.y=i.y*n.y,r.z=i.z*n.z,r.w=i.w*n.w,r},t.multiplyScalar=function(i,n,r){return r=r||new t,r.x=i.x*n,r.y=i.y*n,r.z=i.z*n,r.w=i.w*n,r},t.divide=function(i,n,r){return r=r||new t,r.x=i.x/n.x,r.y=i.y/n.y,r.z=i.z/n.z,r.w=i.w/n.w,r},t.divideScalar=function(i,n,r){return r=r||new t,r.x=i.x/n,r.y=i.y/n,r.z=i.z/n,r.w=i.w/n,r},t.multiplyAdd=function(i,n,r,s){return s=s||new t,s.x=i.x*n.x+r.x,s.y=i.y*n.y+r.y,s.z=i.z*n.z+r.z,s.w=i.w*n.w+r.w,s},t.multiplyScalarAdd=function(i,n,r,s){return s=s||new t,s.x=i.x*n+r.x,s.y=i.y*n+r.y,s.z=i.z*n+r.z,s.w=i.w*n+r.w,s},t.clamp=function(i,n,r,s){var e=i.x,h=i.y,a=i.z,u=i.w,o=n.x,c=n.y,y=n.z,x=n.w,f=r.x,w=r.y,z=r.z,d=r.w;return s=s||new t,s.x=o>e?o:e>f?f:e,s.y=c>h?c:h>w?w:h,s.z=y>a?y:a>z?z:a,s.w=x>u?x:u>d?d:u,s},t.clampScalar=function(i,n,r,s){var e=i.x,h=i.y,a=i.z,u=i.w;return s=s||new t,s.x=n>e?n:e>r?r:e,s.y=n>h?n:h>r?r:h,s.z=n>a?n:a>r?r:a,s.w=n>u?n:u>r?r:u,s},t.min=function(i,n,r){var s=i.x,e=i.y,h=i.z,a=i.w,u=n.x,o=n.y,c=n.z,y=n.w;return r=r||new t,r.x=u>s?s:u,r.y=o>e?e:o,r.z=c>h?h:c,r.w=y>a?a:y,r},t.minScalar=function(i,n,r){var s=i.x,e=i.y,h=i.z,a=i.w;return r=r||new t,r.x=n>s?s:n,r.y=n>e?e:n,r.z=n>h?h:n,r.w=n>a?a:n,r},t.max=function(i,n,r){var s=i.x,e=i.y,h=i.z,a=i.w,u=n.x,o=n.y,c=n.z,y=n.w;return r=r||new t,r.x=s>u?s:u,r.y=e>o?e:o,r.z=h>c?h:c,r.w=a>y?a:y,r},t.maxScalar=function(i,n,r){var s=i.x,e=i.y,h=i.z,a=i.w;return r=r||new t,r.x=s>n?s:n,r.y=e>n?e:n,r.z=h>n?h:n,r.w=a>n?a:n,r},t.lerp=function(i,n,r,s){var e=i.x,h=i.y,a=i.z,u=i.w;return s=s||new t,s.x=e+(n.x-e)*r,s.y=h+(n.y-h)*r,s.z=a+(n.z-a)*r,s.w=u+(n.w-u)*r,s},t.barycentric=function(i,n,r,s,e,h){var a=i.x,u=i.y,o=i.z,c=i.w;return h=h||new t,h.x=a+s*(n.x-a)+e*(r.x-a),h.y=u+s*(n.y-u)+e*(r.y-u),h.z=o+s*(n.z-o)+e*(r.z-o),h.w=c+s*(n.w-c)+e*(r.w-c),h},t.smooth=function(i,n,r,s){r=r>1?1:0>r?0:r,r=r*r*(3-2*r);var e=i.x,h=i.y,a=i.z,u=i.w;return s=s||new t,s.x=e+(n.x-e)*r,s.y=h+(n.y-h)*r,s.z=a+(n.z-a)*r,s.w=u+(n.w-u)*r,s},t.convert=function(i){return Array.isArray(i)?new t(i[0]||0,i[1]||0,i[2]||0,i[3]||0):"number"==typeof i?new t(i,i,i,i):new t(i.x||0,i.y||0,i.z||0,i.w||0)}}(),function(){"use strict";var t=window.Quat=function(t,i,n,r){this.x=t,this.y=i,this.z=n,this.w=r};t.prototype={init:function(t,i,n,r){return this.x=t,this.y=i,this.z=n,this.w=r,this},initIdentity:function(){return this.x=0,this.y=0,this.z=0,this.w=1,this},initZero:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this},initFrom:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},initFromBuffer:function(t,i){return i=i||0,this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this},initAxisAngle:function(t,i){var n=.5*i,r=Math.sin(n);return this.x=t.x*r,this.y=t.y*r,this.z=t.z*r,this.w=Math.cos(n),this},initYawPitchRoll:function(t,i,n){var r=.5*i,s=Math.sin(r),e=Math.cos(r),h=.5*t,a=Math.sin(h),u=Math.cos(h),o=.5*n,c=Math.sin(o),y=Math.cos(o);return this.x=u*s*y+a*e*c,this.y=a*e*y-u*s*c,this.z=u*e*c-a*s*y,this.w=u*e*y+a*s*c,this},clone:function(){return new t(this.x,this.y,this.z,this.w)},copy:function(t,i){i=i||0,t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},length:function(){var t=this.x,i=this.y,n=this.z,r=this.w;return Math.sqrt(t*t+i*i+n*n+r*r)},lengthSquared:function(){var t=this.x,i=this.y,n=this.z,r=this.w;return t*t+i*i+n*n+r*r},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},selfNegate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},selfConjugate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},selfNormalize:function(){var t=this.x,i=this.y,n=this.z,r=this.w,s=1/Math.sqrt(t*t+i*i+n*n+r*r);return this.x=t*s,this.y=i*s,this.z=n*s,this.w=r*s,this},selfInvert:function(){var t=this.x,i=this.y,n=this.z,r=this.w,s=1/Math.sqrt(t*t+i*i+n*n+r*r);return this.x=-t*s,this.y=-i*s,this.z=-n*s,this.w=r*s,this},selfAdd:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},selfSubtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},selfMultiply:function(t){var i=this.x,n=this.y,r=this.z,s=this.w,e=t.x,h=t.y,a=t.z,u=t.w;return this.x=i*u+e*s+n*a-r*h,this.y=n*u+h*s+r*e-i*a,this.z=r*u+a*s+i*h-n*e,this.w=s*u-i*e-n*h-r*a,this},selfConcat:function(t){var i=t.x,n=t.y,r=t.z,s=t.w,e=this.x,h=this.y,a=this.z,u=this.w;return this.x=i*u+e*s+n*a-r*h,this.y=n*u+h*s+r*e-i*a,this.z=r*u+a*s+i*h-n*e,this.w=s*u-i*e-n*h-r*a,this},selfDivide:function(t){var i=this.x,n=this.y,r=this.z,s=this.w,e=t.x,h=t.y,a=t.z,u=t.w,o=1/(e*e+h*h+a*a+u*u);return e=-e*o,h=-h*o,a=-a*o,u*=o,this.x=i*u+e*s+n*a-r*h,this.y=n*u+h*s+r*e-i*a,this.z=r*u+a*s+i*h-n*e,this.w=s*u-i*e-n*h-r*a,this},transform:function(t){var i=this.x,n=this.y,r=this.z,s=this.w,e=i+i,h=n+n,a=r+r,u=s*e,o=s*h,c=s*a,y=i*e,x=i*h,f=i*a,w=n*h,z=n*a,d=n*a,l=t.x,v=t.y,p=t.z;return t.init(l*(1-w-d)+v*(x-c)+p*(f+o),l*(x+c)+v*(1-y-d)+p*(z-u),l*(f-o)+v*(z+u)+p*(1-y-w))}},t.create=function(i,n,r,s){return void 0!==i?new t(i,n,r,s):new t(0,0,0,0)},t.zero=function(){return new t(0,0,0,0)},t.identity=function(){return new t(0,0,0,1)},t.fromAxisAngle=function(i,n){return t.identity().initAxisAngle(i,n)},t.fromYawPitchRoll=function(i,n,r){return t.identity().initYawPitchRoll(i,n,r)},t.negate=function(i,n){return n=n||new t,n.x=-i.x,n.y=-i.y,n.z=-i.z,n.w=-i.w,n},t.conjugate=function(i,n){return n=n||new t,n.x=-i.x,n.y=-i.y,n.z=-i.z,n.w=i.w,n},t.normalize=function(i,n){var r=i.x,s=i.y,e=i.z,h=i.w,a=1/Math.sqrt(r*r+s*s+e*e+h*h);return n=n||new t,n.x=r*a,n.y=s*a,n.z=e*a,n.w=h*a,n},t.invert=function(i,n){var r=i.x,s=i.y,e=i.z,h=i.w,a=1/Math.sqrt(r*r+s*s+e*e+h*h);return n=n||new t,n.x=-r*a,n.y=-s*a,n.z=-e*a,n.w=h*a,n},t.add=function(i,n,r){return r=r||new t,r.x=i.x+n.x,r.y=i.y+n.y,r.z=i.z+n.z,r.w=i.w+n.w,r},t.subtract=function(i,n,r){return r=r||new t,r.x=i.x-n.x,r.y=i.y-n.y,r.z=i.z-n.z,r.w=i.w-n.w,r},t.multiply=function(i,n,r){var s=i.x,e=i.y,h=i.z,a=i.w,u=n.x,o=n.y,c=n.z,y=n.w;return r=r||new t,r.x=s*y+u*a+e*c-h*o,r.y=e*y+o*a+h*u-s*c,r.z=h*y+c*a+s*o-e*u,r.w=a*y-s*u-e*o-h*c,r},t.concat=function(i,n,r){var s=n.x,e=n.y,h=n.z,a=n.w,u=i.x,o=i.y,c=i.z,y=i.w;return r=r||new t,r.x=s*y+u*a+e*c-h*o,r.y=e*y+o*a+h*u-s*c,r.z=h*y+c*a+s*o-e*u,r.w=a*y-s*u-e*o-h*c,r},t.divide=function(i,n,r){var s=i.x,e=i.y,h=i.z,a=i.w,u=n.x,o=n.y,c=n.z,y=n.w,x=1/(u*u+o*o+c*c+y*y);return u=-u*x,o=-o*x,c=-c*x,y*=x,r=r||new t,r.x=s*y+u*a+e*c-h*o,r.y=e*y+o*a+h*u-s*c,r.z=h*y+c*a+s*o-e*u,r.w=a*y-s*u-e*o-h*c,r},t.convert=function(i){return Array.isArray(i)?new t(i[0]||0,i[1]||0,i[2]||0,i[3]||0):"number"==typeof i?new t(i,i,i,i):new t(i.x||0,i.y||0,i.z||0,i.w||0)},t.transform=function(t,i,n){var r=t.x,s=t.y,e=t.z,h=t.w,a=r+r,u=s+s,o=e+e,c=h*a,y=h*u,x=h*o,f=r*a,w=r*u,z=r*o,d=s*u,l=s*o,v=s*o,p=i.x,M=i.y,m=i.z;return n=n||new window.Vec3,n.x=p*(1-d-v)+M*(w-x)+m*(z+y),n.y=p*(w+x)+M*(1-f-v)+m*(l-c),n.z=p*(z-y)+M*(l+c)+m*(1-f-d),void 0!==n.q&&(n.w=1),n}}(),function(){"use strict";var t=window.Vec3,i=(window.Vec4,window.Mat4=function(t){this.data=t||new window.Float32Array(16),this.right=this.data.subarray(0,3),this.up=this.data.subarray(4,7),this.backward=this.data.subarray(8,11),this.translation=this.data.subarray(12,15)});i.prototype={init:function(t,i,n,r,s,e,h,a,u,o,c,y,x,f,w,z){var d=this.data;return d[0]=t,d[1]=i,d[2]=n,d[3]=r,d[4]=s,d[5]=e,d[6]=h,d[7]=a,d[8]=u,d[9]=o,d[10]=c,d[11]=y,d[12]=x,d[13]=f,d[14]=w,d[15]=z,this},initRowMajor:function(t,i,n,r,s,e,h,a,u,o,c,y,x,f,w,z){var d=this.data;return d[0]=t,d[1]=s,d[2]=u,d[3]=x,d[4]=i,d[5]=e,d[6]=o,d[7]=f,d[8]=n,d[9]=h,d[10]=c,d[11]=w,d[12]=r,d[13]=a,d[14]=y,d[15]=z,this},initAll:function(t){var i=this.data;return i[0]=i[1]=i[2]=i[3]=i[4]=i[5]=i[6]=i[7]=i[8]=i[9]=i[10]=i[11]=i[12]=i[13]=i[14]=i[15]=t,this},initIdentity:function(){var t=this.data;return t[0]=t[5]=t[10]=t[15]=1,t[1]=t[2]=t[3]=t[4]=t[6]=t[7]=t[8]=t[9]=t[11]=t[12]=t[13]=t[14]=0,this},initFrom:function(t){var i=this.data,n=t.data;return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],this},initFromBuffer:function(t,i){i=i||0;var n=this.data;return n[0]=t[i],n[1]=t[i+1],n[2]=t[i+2],n[3]=t[i+3],n[4]=t[i+4],n[5]=t[i+5],n[6]=t[i+6],n[7]=t[i+7],n[8]=t[i+8],n[9]=t[i+9],n[10]=t[i+10],n[11]=t[i+11],n[12]=t[i+12],n[13]=t[i+13],n[14]=t[i+14],n[15]=t[i+15],this},initFromQuaternion:function(t){var i=t.x,n=t.y,r=t.z,s=t.w,e=i*i,h=n*n,a=r*r,u=i*n,o=r*s,c=r*i,y=n*s,x=n*r,f=i*s;return this.initRowMajor(1-2*(h+a),2*(u-o),2*(c+y),0,2*(u+o),1-2*(a+e),2*(x-f),0,2*(c-y),2*(x+f),1-2*(h+e),0,0,0,0,1)},initAxisAngle:function(t,i){var n=.5*i,r=Math.sin(n),s=t.x*r,e=t.y*r,h=t.z*r,a=Math.cos(n),u=s*s,o=e*e,c=h*h,y=s*e,x=h*a,f=h*s,w=e*a,z=e*h,d=s*a;return this.initRowMajor(1-2*(o+c),2*(y-x),2*(f+w),0,2*(y+x),1-2*(c+u),2*(z-d),0,2*(f-w),2*(z+d),1-2*(o+u),0,0,0,0,1)},initYawPitchRoll:function(t,i,n){var r=.5*n,s=Math.sin(r),e=Math.cos(r),h=.5*i,a=Math.sin(h),u=Math.cos(h),o=.5*t,c=Math.sin(o),y=Math.cos(o),x=y*a*e+c*u*s,f=c*u*e-y*a*s,w=y*u*s-c*a*e,z=y*u*e+c*a*s,d=x*x,l=f*f,v=w*w,p=x*f,M=w*z,m=w*x,S=f*z,g=f*w,b=x*z;return this.initRowMajor(1-2*(l+v),2*(p-M),2*(m+S),0,2*(p+M),1-2*(v+d),2*(g-b),0,2*(m-S),2*(g+b),1-2*(l+d),0,0,0,0,1)},initRotationX:function(t){var i=Math.cos(t),n=Math.sin(t);return this.initRowMajor(1,0,0,0,0,i,-n,0,0,n,i,0,0,0,0,1)},initRotationY:function(t){var i=Math.cos(t),n=Math.sin(t);return this.initRowMajor(i,0,n,0,0,1,0,0,-n,0,i,0,0,0,0,1)},initRotationZ:function(t){var i=Math.cos(t),n=Math.sin(t);return this.initRowMajor(i,-n,0,0,n,i,0,0,0,0,1,0,0,0,0,1)},initTranslation:function(t,i,n){return this.initRowMajor(1,0,0,t,0,1,0,i,0,0,1,n,0,0,0,1)},initScale:function(t,i,n){return this.initRowMajor(t,0,0,0,0,i,0,0,0,0,n,0,0,0,0,1)},initLookAt:function(t,i,n){var r=t.x-i.x,s=t.y-i.y,e=t.z-i.z,h=n.y*e-n.z*s,a=n.z*r-n.x*e,u=n.x*s-n.y*r,o=1/Math.sqrt(r*r+s*s+e*e);r*=o,s*=o,e*=o,o=1/Math.sqrt(h*h+a*a+u*u),h*=o,a*=o,u*=o;var c=s*u-e*a,y=e*h-r*u,x=r*a-s*h;return this.initRowMajor(h,c,r,t.x,a,y,s,t.y,u,x,e,t.z,0,0,0,1)},initWorld:function(t,i,n){var r=i.x,s=i.y,e=i.z,h=1/Math.sqrt(r*r+s*s+e*e),a=-r*h,u=-s*h,o=-e*h;r=n.y*o-n.z*u,s=n.z*a-n.x*o,e=n.x*u-n.y*a,h=1/Math.sqrt(r*r+s*s+e*e);var c=r*h,y=s*h,x=e*h;return r=u*x-o*y,s=o*c-a*x,e=a*y-u*c,this.initRowMajor(c,r,a,t.x,y,s,u,t.y,x,e,o,t.z,0,0,0,1)},initPerspectiveFieldOfView:function(t,i,n,r){var s=1/Math.tan(.5*t);return this.initRowMajor(s/i,0,0,0,0,s,0,0,0,0,-(r+n)/(r-n),-(2*r*n)/(r-n),0,0,-1,0)},initPerspective:function(t,i,n,r){return this.initRowMajor(n/t,0,0,0,0,n/i,0,0,0,0,-(r+n)/(r-n),-(2*r*n)/(r-n),0,0,-1,0)},initPerspectiveOffCenter:function(t,i,n,r,s,e){return this.initRowMajor(2*s/(i-t),0,(i+t)/(i-t),0,0,2*s/(r-n),(r+n)/(r-n),0,0,0,-(e+s)/(e-s),-(2*e*s)/(e-s),0,0,-1,0)},initOrthographic:function(t,i,n,r){return this.initRowMajor(1/t,0,0,0,0,1/i,0,0,0,0,-2/(r-n),-(r+n)/(r-n),0,0,0,1)},initOrthographicOffCenter:function(t,i,n,r,s,e){return this.initRowMajor(2/(i-t),0,0,-(i+t)/(i-t),0,2/(r-n),0,-(r+n)/(r-n),0,0,-2/(e-s),-(e+s)/(e-s),0,0,0,1)},clone:function(){var t=this.data;return(new i).init(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},copy:function(t,i){i=i||0;var n=this.data;t[i]=n[0],t[i+1]=n[1],t[i+2]=n[2],t[i+3]=n[3],t[i+4]=n[4],t[i+5]=n[5],t[i+6]=n[6],t[i+7]=n[7],t[i+8]=n[8],t[i+9]=n[9],t[i+10]=n[10],t[i+11]=n[11],t[i+12]=n[12],t[i+13]=n[13],t[i+14]=n[14],t[i+15]=n[15]},equals:function(t){var i=this.data,n=t.data;return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]&&i[4]===n[4]&&i[5]===n[5]&&i[6]===n[6]&&i[7]===n[7]&&i[8]===n[8]&&i[9]===n[9]&&i[10]===n[10]&&i[11]===n[11]&&i[12]===n[12]&&i[13]===n[13]&&i[14]===n[14]&&i[15]===n[15]},getForward:function(i){return(i||new t).init(-this.backward[0],-this.backward[1],-this.backward[2])},getBackward:function(i){return(i||new t).init(this.backward[0],this.backward[1],this.backward[2])},getRight:function(i){return(i||new t).init(this.right[0],this.right[1],this.right[2])},getLeft:function(i){return(i||new t).init(-this.right[0],-this.right[1],-this.right[2])},getUp:function(i){return(i||new t).init(this.up[0],this.up[1],this.up[2])},getDown:function(i){return(i||new t).init(-this.up[0],-this.up[1],-this.up[2])},getTranslation:function(i){return(i||new t).init(this.translation[0],this.translation[1],this.translation[2])},getScale:function(i){return(i||new t).init(this.data[0],this.data[5],this.data[10])},copyForward:function(t){return t[0]=-this.backward[0],t[1]=-this.backward[1],t[2]=-this.backward[2],t},copyBackward:function(t){return t[0]=this.backward[0],t[1]=this.backward[1],t[2]=this.backward[2],t},copyRight:function(t){return t[0]=this.right[0],t[1]=this.right[1],t[2]=this.right[2],t},copyLeft:function(t){return t[0]=-this.right[0],t[1]=-this.right[1],t[2]=-this.right[2],t},copyUp:function(t){return t[0]=this.up[0],t[1]=this.up[1],t[2]=this.up[2],t},copyDown:function(t){return t[0]=-this.up[0],t[1]=-this.up[1],t[2]=-this.up[2],t},copyTranslation:function(t){return t[0]=this.translation[0],t[1]=this.translation[1],t[2]=this.translation[2],t},copyScale:function(t){return t[0]=this.data[0],t[1]=this.data[5],t[2]=this.data[10],t},setForward:function(t){return this.backward[0]=-t.x,this.backward[1]=-t.y,this.backward[2]=-t.z,this},setBackward:function(t){return this.backward[0]=t.x,this.backward[1]=t.y,this.backward[2]=t.z,this},setRight:function(t){return this.right[0]=t.x,this.right[1]=t.y,this.right[2]=t.z,this},setLeft:function(t){return this.right[0]=-t.x,this.right[1]=-t.y,this.right[2]=-t.z,this},setUp:function(t){return this.up[0]=t.x,this.up[1]=t.y,this.up[2]=t.z,this},setDown:function(t){return this.up[0]=-t.x,this.up[1]=-t.y,this.up[2]=-t.z,this},setTranslation:function(t){return this.translation[0]=t.x,this.translation[1]=t.y,this.translation[2]=t.z,this},setScale:function(t){return this.data[0]=t.x,this.data[5]=t.y,this.data[10]=t.z,this},determinant:function(){var t=this.data,i=t[0],n=t[4],r=t[8],s=t[12],e=t[1],h=t[5],a=t[9],u=t[13],o=t[2],c=t[6],y=t[10],x=t[14],f=t[3],w=t[7],z=t[11],d=t[15],l=y*d-z*x,v=a*d-z*u,p=a*x-y*u,M=r*d-z*s,m=r*x-y*s,S=r*u-a*s,g=h*l-c*v+w*p,b=n*l-c*M+w*m,A=n*v-h*M+w*S,q=n*p-h*m+c*S;return i*g-e*b+o*A-f*q},selfTranspose:function(){var t=this.data,i=t[1];return t[1]=t[4],t[4]=i,i=t[2],t[2]=t[8],t[8]=i,i=t[3],t[3]=t[12],t[12]=i,i=t[6],t[6]=t[9],t[9]=i,i=t[7],t[7]=t[13],t[13]=i,i=t[11],t[11]=t[14],t[14]=i,this},selfInvert:function(){var t=this.data,i=this.data,n=t[0],r=t[4],s=t[8],e=t[12],h=t[1],a=t[5],u=t[9],o=t[13],c=t[2],y=t[6],x=t[10],f=t[14],w=t[3],z=t[7],d=t[11],l=t[15],v=x*l-d*f,p=u*l-d*o,M=u*f-x*o,m=s*l-d*e,S=s*f-x*e,g=s*o-u*e,b=a*v-y*p+z*M,A=r*v-y*m+z*S,q=r*p-a*m+z*g,F=r*M-a*S+y*g,R=1/(n*b-h*A+c*q-w*F);i[0]=b*R,i[4]=-A*R,i[8]=q*R,i[12]=-F*R,i[1]=-(h*v-c*p+w*M)*R,i[5]=(n*v-c*m+w*S)*R,i[9]=-(n*p-h*m+w*g)*R,i[13]=(n*M-h*S+c*g)*R;var k=y*l-z*f,j=a*l-z*o,O=a*f-y*o,P=r*l-z*e,B=r*f-y*e,D=r*o-a*e;return i[2]=(h*k-c*j+w*O)*R,i[6]=-(n*k-c*P+w*B)*R,i[10]=(n*j-h*P+w*D)*R,i[14]=-(n*O-h*B+c*D)*R,k=y*d-z*x,j=a*d-z*u,O=a*x-y*u,P=r*d-z*s,B=r*x-y*s,D=r*u-a*s,i[3]=-(h*k-c*j+w*O)*R,i[7]=(n*k-c*P+w*B)*R,i[11]=-(n*j-h*P+w*D)*R,i[15]=(n*O-h*B+c*D)*R,this},selfNegate:function(){var t=this.data;return t[0]=-t[0],t[1]=-t[1],t[2]=-t[2],t[3]=-t[3],t[4]=-t[4],t[5]=-t[5],t[6]=-t[6],t[7]=-t[7],t[8]=-t[8],t[9]=-t[9],t[10]=-t[10],t[11]=-t[11],t[12]=-t[12],t[13]=-t[13],t[14]=-t[14],t[15]=-t[15],this},selfAdd:function(t){var i=this.data,n=t.data;return i[0]+=n[0],i[1]+=n[1],i[2]+=n[2],i[3]+=n[3],i[4]+=n[4],i[5]+=n[5],i[6]+=n[6],i[7]+=n[7],i[8]+=n[8],i[9]+=n[9],i[10]+=n[10],i[11]+=n[11],i[12]+=n[12],i[13]+=n[13],i[14]+=n[14],i[15]+=n[15],this},selfAddScalar:function(t){var i=this.data;return i[0]+=t,i[1]+=t,i[2]+=t,i[3]+=t,i[4]+=t,i[5]+=t,i[6]+=t,i[7]+=t,i[8]+=t,i[9]+=t,i[10]+=t,i[11]+=t,i[12]+=t,i[13]+=t,i[14]+=t,i[15]+=t,this},selfSubtract:function(t){var i=this.data,n=t.data;return i[0]-=n[0],i[1]-=n[1],i[2]-=n[2],i[3]-=n[3],i[4]-=n[4],i[5]-=n[5],i[6]-=n[6],i[7]-=n[7],i[8]-=n[8],i[9]-=n[9],i[10]-=n[10],i[11]-=n[11],i[12]-=n[12],i[13]-=n[13],i[14]-=n[14],i[15]-=n[15],this},selfSubtractScalar:function(t){var i=this.data;return i[0]-=t,i[1]-=t,i[2]-=t,i[3]-=t,i[4]-=t,i[5]-=t,i[6]-=t,i[7]-=t,i[8]-=t,i[9]-=t,i[10]-=t,i[11]-=t,i[12]-=t,i[13]-=t,i[14]-=t,i[15]-=t,this},selfMultiply:function(t){var i=t.data,n=this.data,r=this.data,s=i[0],e=i[1],h=i[2],a=i[3],u=i[4],o=i[5],c=i[6],y=i[7],x=i[8],f=i[9],w=i[10],z=i[11],d=i[12],l=i[13],v=i[14],p=i[15],M=n[0],m=n[1],S=n[2],g=n[3],b=n[4],A=n[5],q=n[6],F=n[7],R=n[8],k=n[9],j=n[10],O=n[11],P=n[12],B=n[13],D=n[14],V=n[15];return r[0]=M*s+m*u+S*x+g*d,r[1]=M*e+m*o+S*f+g*l,r[2]=M*h+m*c+S*w+g*v,r[3]=M*a+m*y+S*z+g*p,r[4]=b*s+A*u+q*x+F*d,r[5]=b*e+A*o+q*f+F*l,r[6]=b*h+A*c+q*w+F*v,r[7]=b*a+A*y+q*z+F*p,r[8]=R*s+k*u+j*x+O*d,r[9]=R*e+k*o+j*f+O*l,r[10]=R*h+k*c+j*w+O*v,r[11]=R*a+k*y+j*z+O*p,r[12]=P*s+B*u+D*x+V*d,r[13]=P*e+B*o+D*f+V*l,r[14]=P*h+B*c+D*w+V*v,r[15]=P*a+B*y+D*z+V*p,this},selfConcat:function(t){var i=this.data,n=t.data,r=this.data,s=i[0],e=i[1],h=i[2],a=i[3],u=i[4],o=i[5],c=i[6],y=i[7],x=i[8],f=i[9],w=i[10],z=i[11],d=i[12],l=i[13],v=i[14],p=i[15],M=n[0],m=n[1],S=n[2],g=n[3],b=n[4],A=n[5],q=n[6],F=n[7],R=n[8],k=n[9],j=n[10],O=n[11],P=n[12],B=n[13],D=n[14],V=n[15];return r[0]=M*s+m*u+S*x+g*d,r[1]=M*e+m*o+S*f+g*l,r[2]=M*h+m*c+S*w+g*v,r[3]=M*a+m*y+S*z+g*p,r[4]=b*s+A*u+q*x+F*d,r[5]=b*e+A*o+q*f+F*l,r[6]=b*h+A*c+q*w+F*v,r[7]=b*a+A*y+q*z+F*p,r[8]=R*s+k*u+j*x+O*d,r[9]=R*e+k*o+j*f+O*l,r[10]=R*h+k*c+j*w+O*v,r[11]=R*a+k*y+j*z+O*p,r[12]=P*s+B*u+D*x+V*d,r[13]=P*e+B*o+D*f+V*l,r[14]=P*h+B*c+D*w+V*v,r[15]=P*a+B*y+D*z+V*p,this},selfMultiplyScalar:function(t){var i=this.data;return i[0]*=t,i[1]*=t,i[2]*=t,i[3]*=t,i[4]*=t,i[5]*=t,i[6]*=t,i[7]*=t,i[8]*=t,i[9]*=t,i[10]*=t,i[11]*=t,i[12]*=t,i[13]*=t,i[14]*=t,i[15]*=t,this},selfDivide:function(t){var i=this.data,n=t.data;return i[0]/=n[0],i[1]/=n[1],i[2]/=n[2],i[3]/=n[3],i[4]/=n[4],i[5]/=n[5],i[6]/=n[6],i[7]/=n[7],i[8]/=n[8],i[9]/=n[9],i[10]/=n[10],i[11]/=n[11],i[12]/=n[12],i[13]/=n[13],i[14]/=n[14],i[15]/=n[15],this},selfDivideScalar:function(t){t=1/t;var i=this.data;return i[0]*=t,i[1]*=t,i[2]*=t,i[3]*=t,i[4]*=t,i[5]*=t,i[6]*=t,i[7]*=t,i[8]*=t,i[9]*=t,i[10]*=t,i[11]*=t,i[12]*=t,i[13]*=t,i[14]*=t,i[15]*=t,this},transform:function(t){var i=t.x||0,n=t.y||0,r=t.z||0,s=void 0!==t.w?t.w:1,e=this.data;return t.init(i*e[0]+n*e[4]+r*e[8]+s*e[12],i*e[1]+n*e[5]+r*e[9]+s*e[13],i*e[2]+n*e[6]+r*e[10]+s*e[14],i*e[3]+n*e[7]+r*e[11]+s*e[15])},transformNormal:function(t){var i=t.x||0,n=t.y||0,r=t.z||0,s=this.data;return t.init(i*s[0]+n*s[4]+r*s[8],i*s[1]+n*s[5]+r*s[9],i*s[2]+n*s[6]+r*s[10])},transformV2Buffer:function(t,i,n,r){var s,e,h=this.data;for(i=i||0,n=void 0===n?2:n,r=void 0===r?t.length/n:r;r>0;)s=t[i],e=t[i+1],t[i]=s*h[0]+e*h[4]+h[8]+h[12],t[i+1]=s*h[1]+e*h[5]+h[9]+h[13],i+=n},transformV3Buffer:function(t,i,n,r){var s,e,h,a=this.data;for(i=i||0,n=void 0===n?3:n,r=void 0===r?t.length/n:r;r>0;)s=t[i],e=t[i+1],h=t[i+2],t[i]=s*a[0]+e*a[4]+h*a[8]+a[12],t[i+1]=s*a[1]+e*a[5]+h*a[9]+a[13],t[i+2]=s*a[2]+e*a[6]+h*a[10]+a[14],i+=n},transformV4Buffer:function(t,i,n,r){var s,e,h,a,u=this.data;for(i=i||0,n=void 0===n?4:n,r=void 0===r?t.length/n:r;r>0;)s=t[i],e=t[i+1],h=t[i+2],a=t[i+3],t[i]=s*u[0]+e*u[4]+h*u[8]+a*u[12],t[i+1]=s*u[1]+e*u[5]+h*u[9]+a*u[13],t[i+2]=s*u[2]+e*u[6]+h*u[10]+a*u[14],t[i+3]=s*u[3]+e*u[7]+h*u[11]+a*u[15],i+=n},transformNormalBuffer:function(t,i,n,r){var s,e,h,a=this.data;for(i=i||0,n=void 0===n?2:n,r=void 0===r?t.length/n:r;r>0;)s=t[i],e=t[i+1],h=t[i+2],t[i]=s*a[0]+e*a[4]+h*a[8],t[i+1]=s*a[1]+e*a[5]+h*a[9],t[i+2]=s*a[2]+e*a[6]+h*a[10],i+=n}},i.transpose=function(t,n){var r=t.data;return(n||new i).init(r[0],r[4],r[8],r[12],r[1],r[5],r[9],r[13],r[2],r[6],r[10],r[14],r[3],r[7],r[11],r[15])},i.invert=function(t,n){n=n||new i;var r=t.data,s=n.data,e=r[0],h=r[4],a=r[8],u=r[12],o=r[1],c=r[5],y=r[9],x=r[13],f=r[2],w=r[6],z=r[10],d=r[14],l=r[3],v=r[7],p=r[11],M=r[15],m=z*M-p*d,S=y*M-p*x,g=y*d-z*x,b=a*M-p*u,A=a*d-z*u,q=a*x-y*u,F=c*m-w*S+v*g,R=h*m-w*b+v*A,k=h*S-c*b+v*q,j=h*g-c*A+w*q,O=1/(e*F-o*R+f*k-l*j);s[0]=F*O,s[4]=-R*O,s[8]=k*O,s[12]=-j*O,s[1]=-(o*m-f*S+l*g)*O,s[5]=(e*m-f*b+l*A)*O,s[9]=-(e*S-o*b+l*q)*O,s[13]=(e*g-o*A+f*q)*O;
var P=w*M-v*d,B=c*M-v*x,D=c*d-w*x,V=h*M-v*u,N=h*d-w*u,C=h*x-c*u;return s[2]=(o*P-f*B+l*D)*O,s[6]=-(e*P-f*V+l*N)*O,s[10]=(e*B-o*V+l*C)*O,s[14]=-(e*D-o*N+f*C)*O,P=w*p-v*z,B=c*p-v*y,D=c*z-w*y,V=h*p-v*a,N=h*z-w*a,C=h*y-c*a,s[3]=-(o*P-f*B+l*D)*O,s[7]=(e*P-f*V+l*N)*O,s[11]=-(e*B-o*V+l*C)*O,s[15]=(e*D-o*N+f*C)*O,n},i.negate=function(t,n){n=n||new i;var r=t.data,s=n.data;return s[0]=-r[0],s[1]=-r[1],s[2]=-r[2],s[3]=-r[3],s[4]=-r[4],s[5]=-r[5],s[6]=-r[6],s[7]=-r[7],s[8]=-r[8],s[9]=-r[9],s[10]=-r[10],s[11]=-r[11],s[12]=-r[12],s[13]=-r[13],s[14]=-r[14],s[15]=-r[15],n},i.add=function(t,n,r){r=r||new i;var s=t.data,e=n.data,h=r.data;return h[0]=s[0]+e[0],h[1]=s[1]+e[1],h[2]=s[2]+e[2],h[3]=s[3]+e[3],h[4]=s[4]+e[4],h[5]=s[5]+e[5],h[6]=s[6]+e[6],h[7]=s[7]+e[7],h[8]=s[8]+e[8],h[9]=s[9]+e[9],h[10]=s[10]+e[10],h[11]=s[11]+e[11],h[12]=s[12]+e[12],h[13]=s[13]+e[13],h[14]=s[14]+e[14],h[15]=s[15]+e[15],r},i.addScalar=function(t,n,r){r=r||new i;var s=t.data,e=r.data;return e[0]=s[0]+n,e[1]=s[1]+n,e[2]=s[2]+n,e[3]=s[3]+n,e[4]=s[4]+n,e[5]=s[5]+n,e[6]=s[6]+n,e[7]=s[7]+n,e[8]=s[8]+n,e[9]=s[9]+n,e[10]=s[10]+n,e[11]=s[11]+n,e[12]=s[12]+n,e[13]=s[13]+n,e[14]=s[14]+n,e[15]=s[15]+n,r},i.subtract=function(t,n,r){r=r||new i;var s=t.data,e=n.data,h=r.data;return h[0]=s[0]-e[0],h[1]=s[1]-e[1],h[2]=s[2]-e[2],h[3]=s[3]-e[3],h[4]=s[4]-e[4],h[5]=s[5]-e[5],h[6]=s[6]-e[6],h[7]=s[7]-e[7],h[8]=s[8]-e[8],h[9]=s[9]-e[9],h[10]=s[10]-e[10],h[11]=s[11]-e[11],h[12]=s[12]-e[12],h[13]=s[13]-e[13],h[14]=s[14]-e[14],h[15]=s[15]-e[15],r},i.subtractScalar=function(t,n,r){r=r||new i;var s=t.data,e=r.data;return e[0]=s[0]-n,e[1]=s[1]-n,e[2]=s[2]-n,e[3]=s[3]-n,e[4]=s[4]-n,e[5]=s[5]-n,e[6]=s[6]-n,e[7]=s[7]-n,e[8]=s[8]-n,e[9]=s[9]-n,e[10]=s[10]-n,e[11]=s[11]-n,e[12]=s[12]-n,e[13]=s[13]-n,e[14]=s[14]-n,e[15]=s[15]-n,r},i.multiply=function(t,n,r){r=r||new i;var s=n.data,e=t.data,h=r.data,a=s[0],u=s[1],o=s[2],c=s[3],y=s[4],x=s[5],f=s[6],w=s[7],z=s[8],d=s[9],l=s[10],v=s[11],p=s[12],M=s[13],m=s[14],S=s[15],g=e[0],b=e[1],A=e[2],q=e[3],F=e[4],R=e[5],k=e[6],j=e[7],O=e[8],P=e[9],B=e[10],D=e[11],V=e[12],N=e[13],C=e[14],I=e[15];return h[0]=g*a+b*y+A*z+q*p,h[1]=g*u+b*x+A*d+q*M,h[2]=g*o+b*f+A*l+q*m,h[3]=g*c+b*w+A*v+q*S,h[4]=F*a+R*y+k*z+j*p,h[5]=F*u+R*x+k*d+j*M,h[6]=F*o+R*f+k*l+j*m,h[7]=F*c+R*w+k*v+j*S,h[8]=O*a+P*y+B*z+D*p,h[9]=O*u+P*x+B*d+D*M,h[10]=O*o+P*f+B*l+D*m,h[11]=O*c+P*w+B*v+D*S,h[12]=V*a+N*y+C*z+I*p,h[13]=V*u+N*x+C*d+I*M,h[14]=V*o+N*f+C*l+I*m,h[15]=V*c+N*w+C*v+I*S,r},i.concat=function(t,n,r){r=r||new i;var s=t.data,e=n.data,h=r.data,a=s[0],u=s[1],o=s[2],c=s[3],y=s[4],x=s[5],f=s[6],w=s[7],z=s[8],d=s[9],l=s[10],v=s[11],p=s[12],M=s[13],m=s[14],S=s[15],g=e[0],b=e[1],A=e[2],q=e[3],F=e[4],R=e[5],k=e[6],j=e[7],O=e[8],P=e[9],B=e[10],D=e[11],V=e[12],N=e[13],C=e[14],I=e[15];return h[0]=g*a+b*y+A*z+q*p,h[1]=g*u+b*x+A*d+q*M,h[2]=g*o+b*f+A*l+q*m,h[3]=g*c+b*w+A*v+q*S,h[4]=F*a+R*y+k*z+j*p,h[5]=F*u+R*x+k*d+j*M,h[6]=F*o+R*f+k*l+j*m,h[7]=F*c+R*w+k*v+j*S,h[8]=O*a+P*y+B*z+D*p,h[9]=O*u+P*x+B*d+D*M,h[10]=O*o+P*f+B*l+D*m,h[11]=O*c+P*w+B*v+D*S,h[12]=V*a+N*y+C*z+I*p,h[13]=V*u+N*x+C*d+I*M,h[14]=V*o+N*f+C*l+I*m,h[15]=V*c+N*w+C*v+I*S,this},i.multiplyScalar=function(t,n,r){r=r||new i;var s=t.data,e=r.data;return e[0]=s[0]*n,e[1]=s[1]*n,e[2]=s[2]*n,e[3]=s[3]*n,e[4]=s[4]*n,e[5]=s[5]*n,e[6]=s[6]*n,e[7]=s[7]*n,e[8]=s[8]*n,e[9]=s[9]*n,e[10]=s[10]*n,e[11]=s[11]*n,e[12]=s[12]*n,e[13]=s[13]*n,e[14]=s[14]*n,e[15]=s[15]*n,r},i.divide=function(t,n,r){r=r||new i;var s=t.data,e=n.data,h=r.data;return h[0]=s[0]*e[0],h[1]=s[1]*e[1],h[2]=s[2]*e[2],h[3]=s[3]*e[3],h[4]=s[4]*e[4],h[5]=s[5]*e[5],h[6]=s[6]*e[6],h[7]=s[7]*e[7],h[8]=s[8]*e[8],h[9]=s[9]*e[9],h[10]=s[10]*e[10],h[11]=s[11]*e[11],h[12]=s[12]*e[12],h[13]=s[13]*e[13],h[14]=s[14]*e[14],h[15]=s[15]*e[15],r},i.divideScalar=function(t,n,r){r=r||new i;var s=t.data,e=r.data;return n=1/n,e[0]=s[0]*n,e[1]=s[1]*n,e[2]=s[2]*n,e[3]=s[3]*n,e[4]=s[4]*n,e[5]=s[5]*n,e[6]=s[6]*n,e[7]=s[7]*n,e[8]=s[8]*n,e[9]=s[9]*n,e[10]=s[10]*n,e[11]=s[11]*n,e[12]=s[12]*n,e[13]=s[13]*n,e[14]=s[14]*n,e[15]=s[15]*n,r},i.lerp=function(t,n,r,s){s=s||new i;var e=t.data,h=n.data,a=s.data;return a[0]=e[0]+(h[0]-e[0])*r,a[1]=e[1]+(h[1]-e[1])*r,a[2]=e[2]+(h[2]-e[2])*r,a[3]=e[3]+(h[3]-e[3])*r,a[4]=e[4]+(h[4]-e[4])*r,a[5]=e[5]+(h[5]-e[5])*r,a[6]=e[6]+(h[6]-e[6])*r,a[7]=e[7]+(h[7]-e[7])*r,a[8]=e[8]+(h[8]-e[8])*r,a[9]=e[9]+(h[9]-e[9])*r,a[10]=e[10]+(h[10]-e[10])*r,a[11]=e[11]+(h[11]-e[11])*r,a[12]=e[12]+(h[12]-e[12])*r,a[13]=e[13]+(h[13]-e[13])*r,a[14]=e[14]+(h[14]-e[14])*r,a[15]=e[15]+(h[15]-e[15])*r,s},i.zero=function(){return new i},i.identity=function(){var t=new i,n=t.data;return n[0]=n[5]=n[10]=n[15]=1,t},i.create=function(t,n,r,s,e,h,a,u,o,c,y,x,f,w,z,d){var l=new i,v=l.data;return void 0!==t&&(v[0]=t,v[1]=n,v[2]=r,v[3]=s,v[4]=e,v[5]=h,v[6]=a,v[7]=u,v[8]=o,v[9]=c,v[10]=y,v[11]=x,v[12]=f,v[13]=w,v[14]=z,v[15]=d),l},i.createRowMajor=function(t,n,r,s,e,h,a,u,o,c,y,x,f,w,z,d){var l=new i,v=l.data;return v[0]=t,v[1]=e,v[2]=o,v[3]=f,v[4]=n,v[5]=h,v[6]=c,v[7]=w,v[8]=r,v[9]=a,v[10]=y,v[11]=z,v[12]=s,v[13]=u,v[14]=x,v[15]=d,l},i.createScale=function(t,n,r){return(new i).initScale(t,n,r)},i.createTranlsation=function(t,n,r){return(new i).initTranslation(t,n,r)},i.createLookAt=function(t,n,r){return(new i).initLookAt(t,n,r)},i.createWorld=function(t,n,r){return(new i).initWorld(t,n,r)},i.createPerspectiveFieldOfView=function(t,n,r,s){return(new i).initPerspectiveFieldOfView(t,n,r,s)},i.createPerspective=function(t,n,r,s){return(new i).initPerspective(t,n,r,s)},i.createPerspectiveOffCenter=function(t,n,r,s,e,h){return(new i).initPerspectiveOffCenter(t,n,r,s,e,h)},i.createOrthographic=function(t,n,r,s){return(new i).initOrthographic(t,n,r,s)},i.createOrthographicOffCenter=function(t,n,r,s,e,h){return(new i).initOrthographicOffCenter(t,n,r,s,e,h)},i.prettyString=function(t){var i=t.data;return[[i[0].toFixed(3),i[4].toFixed(3),i[8].toFixed(3),i[12].toFixed(3)].join(", "),[i[1].toFixed(3),i[5].toFixed(3),i[9].toFixed(3),i[13].toFixed(3)].join(", "),[i[2].toFixed(3),i[6].toFixed(3),i[10].toFixed(3),i[14].toFixed(3)].join(", "),[i[3].toFixed(3),i[7].toFixed(3),i[11].toFixed(3),i[15].toFixed(3)].join(", ")].join("\n")}}();