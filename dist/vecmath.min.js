!function(t){"use strict";var i=function(t,i){this.x=t,this.y=i};t.Vec2=i,i.prototype={init:function(t,i){return this.x=t,this.y=i,this},initFrom:function(t){return this.x=t.x,this.y=t.y,this},initFromBuffer:function(t,i){return i=i||0,this.x=t[i],this.y=t[i+1],this},clone:function(){return new i(this.x,this.y)},copyTo:function(t,i){return i=i||0,t[i]=this.x,t[i+1]=this.y,t},dump:function(){return[this.x,this.y]},equals:function(t){return this.x===t.x&&this.y===t.y},length:function(){var t=this.x,i=this.y;return Math.sqrt(t*t+i*i)},lengthSquared:function(){var t=this.x,i=this.y;return t*t+i*i},distance:function(t){var i=this.x-t.x,n=this.y-t.y;return Math.sqrt(i*i+n*n)},distanceSquared:function(t){var i=this.x-t.x,n=this.y-t.y;return i*i+n*n},dot:function(t){return this.x*t.x+this.y*t.y},selfCross:function(t){var i=this.y*t.z-this.z*t.y,n=this.z*t.x-this.x*t.z;return this.x=i,this.y=n,this},selfNormalize:function(){var t=this.x,i=this.y,n=1/Math.sqrt(t*t+i*i);return this.x*=n,this.y*=n,this},selfInvert:function(){return this.x=1/this.x,this.y=1/this.y,this},selfNegate:function(){return this.x=-this.x,this.y=-this.y,this},selfAdd:function(t){return this.x+=t.x,this.y+=t.y,this},selfAddScalar:function(t){return this.x+=t,this.y+=t,this},selfSubtract:function(t){return this.x-=t.x,this.y-=t.y,this},selfSubtractScalar:function(t){return this.x-=t,this.y-=t,this},selfMultiply:function(t){return this.x*=t.x,this.y*=t.y,this},selfMultiplyScalar:function(t){return this.x*=t,this.y*=t,this},selfDivide:function(t){return this.x/=t.x,this.y/=t.y,this},selfDivideScalar:function(t){return t=1/t,this.x*=t,this.y*=t,this},selfMultiplyAdd:function(t,i){return this.x=this.x*t.x+i.x,this.y=this.y*t.y+i.y,this},selfMultiplyScalarAdd:function(t,i){return this.x=this.x*t+i.x,this.y=this.y*t+i.y,this},selfTransformMat4:function(t){var i=this.x,n=this.y,r=t.data;return this.x=i*r[0]+n*r[4]+r[12],this.y=i*r[1]+n*r[5]+r[13],this},selfTransformMat3:function(t){var i=this.x,n=this.y,r=t.data;return this.x=i*r[0]+n*r[3],this.y=i*r[1]+n*r[4],this},selfTransformMat2:function(t){var i=this.x,n=this.y,r=t.data;return this.x=i*r[0]+n*r[2],this.y=i*r[1]+n*r[3],this}},i.create=function(t,n){return null!=t?new i(t,n):new i(0,0)},i.zero=function(){return new i(0,0)},i.one=function(){return new i(1,1)},i.normalize=function(t,n){var r=t.x,s=t.y,e=1/Math.sqrt(r*r+s*s);return n=n||new i,n.x=r*e,n.y=s*e,n},i.invert=function(t,n){return n=n||new i,n.x=1/t.x,n.y=1/t.y,n},i.negate=function(t,n){return n=n||new i,n.x=-t.x,n.y=-t.y,n},i.add=function(t,n,r){return r=r||new i,r.x=t.x+n.x,r.y=t.y+n.y,r},i.addScalar=function(t,n,r){return r=r||new i,r.x=t.x+n,r.y=t.y+n,r},i.subtract=function(t,n,r){return r=r||new i,r.x=t.x-n.x,r.y=t.y-n.y,r},i.subtractScalar=function(t,n,r){return r=r||new i,r.x=t.x-n,r.y=t.y-n,r},i.multiply=function(t,n,r){return r=r||new i,r.x=t.x*n.x,r.y=t.y*n.y,r},i.multiplyScalar=function(t,n,r){return r=r||new i,r.x=t.x*n,r.y=t.y*n,r},i.divide=function(t,n,r){return r=r||new i,r.x=t.x/n.x,r.y=t.y/n.y,r},i.divideScalar=function(t,n,r){return n=1/n,r=r||new i,r.x=t.x*n,r.y=t.y*n,r},i.multiplyAdd=function(t,n,r,s){return s=s||new i,s.x=t.x*n.x+r.x,s.y=t.y*n.y+r.y,s},i.multiplyScalarAdd=function(t,n,r,s){return s=s||new i,s.x=t.x*n+r.x,s.y=t.y*n+r.y,s},i.clamp=function(t,n,r,s){var e=t.x,h=t.y,a=n.x,u=n.y,o=r.x,c=r.y;return s=s||new i,s.x=a>e?a:e>o?o:e,s.y=u>h?u:h>c?c:h,s},i.clampScalar=function(t,n,r,s){var e=t.x,h=t.y;return s=s||new i,s.x=n>e?n:e>r?r:e,s.y=n>h?n:h>r?r:h,s},i.min=function(t,n,r){var s=t.x,e=t.y,h=n.x,a=n.y;return r=r||new i,r.x=h>s?s:h,r.y=a>e?e:a,r},i.minScalar=function(t,n,r){var s=t.x,e=t.y;return r=r||new i,r.x=n>s?s:n,r.y=n>e?e:n,r},i.max=function(t,n,r){var s=t.x,e=t.y,h=n.x,a=n.y;return r=r||new i,r.x=s>h?s:h,r.y=e>a?e:a,r},i.maxScalar=function(t,n,r){var s=t.x,e=t.y;return r=r||new i,r.x=s>n?s:n,r.y=e>n?e:n,r},i.lerp=function(t,n,r,s){var e=t.x,h=t.y;return s=s||new i,s.x=e+(n.x-e)*r,s.y=h+(n.y-h)*r,s},i.barycentric=function(t,n,r,s,e,h){var a=t.x,u=t.y;return h=h||new i,h.x=a+s*(n.x-a)+e*(r.x-a),h.y=u+s*(n.y-u)+e*(r.y-u),h},i.smooth=function(t,n,r,s){r=r>1?1:0>r?0:r,r=r*r*(3-2*r);var e=t.x,h=t.y;return s=s||new i,s.x=e+(n.x-e)*r,s.y=h+(n.y-h)*r,s},i.convert=function(t){return Array.isArray(t)?new i(t[0]||0,t[1]||0):"number"==typeof t?new i(t,t):new i(t.x||0,t.y||0)}}(window),function(t){"use strict";var i=function(t,i,n){this.x=t,this.y=i,this.z=n};t.Vec3=i,i.prototype={init:function(t,i,n){return this.x=t,this.y=i,this.z=n,this},initFrom:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},initFromBuffer:function(t,i){return i=i||0,this.x=t[i],this.y=t[i+1],this.z=t[i+2],this},clone:function(){return new i(this.x,this.y,this.z)},copyTo:function(t,i){return i=i||0,t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t},dump:function(){return[this.x,this.y,this.z]},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},length:function(){var t=this.x,i=this.y,n=this.z;return Math.sqrt(t*t+i*i+n*n)},lengthSquared:function(){var t=this.x,i=this.y,n=this.z;return t*t+i*i+n*n},distance:function(t){var i=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(i*i+n*n+r*r)},distanceSquared:function(t){var i=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return i*i+n*n+r*r},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},selfCross:function(t){var i=this.y*t.z-this.z*t.y,n=this.z*t.x-this.x*t.z,r=this.x*t.y-this.y*t.x;return this.x=i,this.y=n,this.z=r,this},selfNormalize:function(){var t=this.x,i=this.y,n=this.z,r=1/Math.sqrt(t*t+i*i+n*n);return this.x*=r,this.y*=r,this.z*=r,this},selfInvert:function(){return this.x=1/this.x,this.y=1/this.y,this.z=1/this.z,this},selfNegate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},selfAdd:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},selfAddScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},selfSubtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},selfSubtractScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},selfMultiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this},selfMultiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},selfDivide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},selfDivideScalar:function(t){return t=1/t,this.x*=t,this.y*=t,this.z*=t,this},selfMultiplyAdd:function(t,i){return this.x=this.x*t.x+i.x,this.y=this.y*t.y+i.y,this.z=this.z*t.z+i.z,this},selfMultiplyScalarAdd:function(t,i){return this.x=this.x*t+i.x,this.y=this.y*t+i.y,this.z=this.z*t+i.z,this},selfTransformQuat:function(t){var i=t.x,n=t.y,r=t.z,s=t.w,e=i+i,h=n+n,a=r+r,u=s*e,o=s*h,c=s*a,y=i*e,x=i*h,f=i*a,w=n*h,z=n*a,l=n*a,d=this.x,v=this.y,p=this.z;return this.x=d*(1-w-l)+v*(x-c)+p*(f+o),this.y=d*(x+c)+v*(1-y-l)+p*(z-u),this.z=d*(f-o)+v*(z+u)+p*(1-y-w),this},selfTransformMat4:function(t){var i=this.x,n=this.y,r=this.z,s=1,e=t.data;return this.x=i*e[0]+n*e[4]+r*e[8]+s*e[12],this.y=i*e[1]+n*e[5]+r*e[9]+s*e[13],this.z=i*e[2]+n*e[6]+r*e[10]+s*e[14],this},selfTransformMat3:function(t){var i=this.x,n=this.y,r=this.z,s=t.data;return this.x=i*s[0]+n*s[3]+r*s[6],this.y=i*s[1]+n*s[4]+r*s[7],this.z=i*s[2]+n*s[5]+r*s[8],this},selfTransformMat2:function(t){var i=this.x,n=this.y,r=t.data;return this.x=i*r[0]+n*r[2],this.y=i*r[1]+n*r[3],this}},i.create=function(t,n,r){return null!=t?new i(t,n,r):new i(0,0,0)},i.zero=function(){return new i(0,0,0)},i.one=function(){return new i(1,1,1)},i.normalize=function(t,n){var r=t.x,s=t.y,e=t.z,h=1/Math.sqrt(r*r+s*s+e*e);return n=n||new i,n.x=r*h,n.y=s*h,n.z=e*h,n},i.cross=function(t,n,r){var s=t.y*n.z-t.z*n.y,e=t.z*n.x-t.x*n.z,h=t.x*n.y-t.y*n.x;return r=r||new i,r.x=s,r.y=e,r.z=h,r},i.invert=function(t,n){return n=n||new i,n.x=1/t.x,n.y=1/t.y,n.z=1/t.z,n},i.negate=function(t,n){return n=n||new i,n.x=-t.x,n.y=-t.y,n.z=-t.z,n},i.add=function(t,n,r){return r=r||new i,r.x=t.x+n.x,r.y=t.y+n.y,r.z=t.z+n.z,r},i.addScalar=function(t,n,r){return r=r||new i,r.x=t.x+n,r.y=t.y+n,r.z=t.z+n,r},i.subtract=function(t,n,r){return r=r||new i,r.x=t.x-n.x,r.y=t.y-n.y,r.z=t.z-n.z,r},i.subtractScalar=function(t,n,r){return r=r||new i,r.x=t.x-n,r.y=t.y-n,r.z=t.z-n,r},i.multiply=function(t,n,r){return r=r||new i,r.x=t.x*n.x,r.y=t.y*n.y,r.z=t.z*n.z,r},i.multiplyScalar=function(t,n,r){return r=r||new i,r.x=t.x*n,r.y=t.y*n,r.z=t.z*n,r},i.divide=function(t,n,r){return r=r||new i,r.x=t.x/n.x,r.y=t.y/n.y,r.z=t.z/n.z,r},i.divideScalar=function(t,n,r){return n=1/n,r=r||new i,r.x=t.x*n,r.y=t.y*n,r.z=t.z*n,r},i.multiplyAdd=function(t,n,r,s){return s=s||new i,s.x=t.x*n.x+r.x,s.y=t.y*n.y+r.y,s.z=t.z*n.z+r.z,s},i.multiplyScalarAdd=function(t,n,r,s){return s=s||new i,s.x=t.x*n+r.x,s.y=t.y*n+r.y,s.z=t.z*n+r.z,s},i.clamp=function(t,n,r,s){var e=t.x,h=t.y,a=t.z,u=n.x,o=n.y,c=n.z,y=r.x,x=r.y,f=r.z;return s=s||new i,s.x=u>e?u:e>y?y:e,s.y=o>h?o:h>x?x:h,s.z=c>a?c:a>f?f:a,s},i.clampScalar=function(t,n,r,s){var e=t.x,h=t.y,a=t.z;return s=s||new i,s.x=n>e?n:e>r?r:e,s.y=n>h?n:h>r?r:h,s.z=n>a?n:a>r?r:a,s},i.min=function(t,n,r){var s=t.x,e=t.y,h=t.z,a=n.x,u=n.y,o=n.z;return r=r||new i,r.x=a>s?s:a,r.y=u>e?e:u,r.z=o>h?h:o,r},i.minScalar=function(t,n,r){var s=t.x,e=t.y,h=t.z;return r=r||new i,r.x=n>s?s:n,r.y=n>e?e:n,r.z=n>h?h:n,r},i.max=function(t,n,r){var s=t.x,e=t.y,h=t.z,a=n.x,u=n.y,o=n.z;return r=r||new i,r.x=s>a?s:a,r.y=e>u?e:u,r.z=h>o?h:o,r},i.maxScalar=function(t,n,r){var s=t.x,e=t.y,h=t.z;return r=r||new i,r.x=s>n?s:n,r.y=e>n?e:n,r.z=h>n?h:n,r},i.lerp=function(t,n,r,s){var e=t.x,h=t.y,a=t.z;return s=s||new i,s.x=e+(n.x-e)*r,s.y=h+(n.y-h)*r,s.z=a+(n.z-a)*r,s},i.barycentric=function(t,n,r,s,e,h){var a=t.x,u=t.y,o=t.z;return h=h||new i,h.x=a+s*(n.x-a)+e*(r.x-a),h.y=u+s*(n.y-u)+e*(r.y-u),h.z=o+s*(n.z-o)+e*(r.z-o),h},i.smooth=function(t,n,r,s){r=r>1?1:0>r?0:r,r=r*r*(3-2*r);var e=t.x,h=t.y,a=t.z;return s=s||new i,s.x=e+(n.x-e)*r,s.y=h+(n.y-h)*r,s.z=a+(n.z-a)*r,s},i.convert=function(t){return Array.isArray(t)?new i(t[0]||0,t[1]||0,t[2]||0):"number"==typeof t?new i(t,t,t):new i(t.x||0,t.y||0,t.z||0)}}(window),function(t){"use strict";var i=function(t,i,n,r){this.x=t,this.y=i,this.z=n,this.w=r};t.Vec4=i,i.prototype={init:function(t,i,n,r){return this.x=t,this.y=i,this.z=n,this.w=r,this},initFrom:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},initFromBuffer:function(t,i){return i=i||0,this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this},clone:function(){return new i(this.x,this.y,this.z,this.w)},copyTo:function(t,i){return i=i||0,t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w,t},dump:function(){return[this.x,this.y,this.z,this.w]},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},length:function(){var t=this.x,i=this.y,n=this.z,r=this.w;return Math.sqrt(t*t+i*i+n*n+r*r)},lengthSquared:function(){var t=this.x,i=this.y,n=this.z,r=this.w;return t*t+i*i+n*n+r*r},distance:function(t){var i=this.x-t.x,n=this.y-t.y,r=this.z-t.z,s=this.w-t.w;return Math.sqrt(i*i+n*n+r*r+s*s)},distanceSquared:function(t){var i=this.x-t.x,n=this.y-t.y,r=this.z-t.z,s=this.w-t.w;return i*i+n*n+r*r+s*s},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},selfNormalize:function(){var t=this.x,i=this.y,n=this.z,r=this.w,s=1/Math.sqrt(t*t+i*i+n*n+r*r);return this.x*=s,this.y*=s,this.z*=s,this.w*=s,this},selfInvert:function(){return this.x=1/this.x,this.y=1/this.y,this.z=1/this.z,this.w=1/this.w,this},selfNegate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},selfAdd:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},selfAddScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},selfSubtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},selfSubtractScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},selfMultiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this},selfMultiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},selfDivide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this},selfDivideScalar:function(t){return t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},selfMultiplyAdd:function(t,i){return this.x=this.x*t.x+i.x,this.y=this.y*t.y+i.y,this.z=this.z*t.z+i.z,this.w=this.w*t.w+i.w,this},selfMultiplyScalarAdd:function(t,i){return this.x=this.x*t+i.x,this.y=this.y*t+i.y,this.z=this.z*t+i.z,this.w=this.w*t+i.w,this},selfTransformQuat:function(t){var i=t.x,n=t.y,r=t.z,s=t.w,e=i+i,h=n+n,a=r+r,u=s*e,o=s*h,c=s*a,y=i*e,x=i*h,f=i*a,w=n*h,z=n*a,l=n*a,d=this.x,v=this.y,p=this.z;return this.x=d*(1-w-l)+v*(x-c)+p*(f+o),this.y=d*(x+c)+v*(1-y-l)+p*(z-u),this.z=d*(f-o)+v*(z+u)+p*(1-y-w),this},selfTransformMat4:function(t){var i=this.x,n=this.y,r=this.z,s=this.w,e=t.data;return this.x=i*e[0]+n*e[4]+r*e[8]+s*e[12],this.y=i*e[1]+n*e[5]+r*e[9]+s*e[13],this.z=i*e[2]+n*e[6]+r*e[10]+s*e[14],this.w=i*e[3]+n*e[7]+r*e[11]+s*e[15],this},selfTransformMat3:function(t){var i=this.x,n=this.y,r=this.z,s=t.data;return this.x=i*s[0]+n*s[3]+r*s[6],this.y=i*s[1]+n*s[4]+r*s[7],this.z=i*s[2]+n*s[5]+r*s[8],this.w=1,this},selfTransformMat2:function(t){var i=this.x,n=this.y,r=t.data;return this.x=i*r[0]+n*r[2],this.y=i*r[1]+n*r[3],this}},i.create=function(t,n,r,s){return null!=t?new i(t,n,r,s):new i(0,0,0,0)},i.zero=function(){return new i(0,0,0,0)},i.one=function(){return new i(1,1,1,1)},i.normalize=function(t,n){var r=t.x,s=t.y,e=t.z,h=t.w,a=1/Math.sqrt(r*r+s*s+e*e+h*h);return n=n||new i,n.x=r*a,n.y=s*a,n.z=e*a,n.w=h*a,n},i.invert=function(t,n){return n=n||new i,n.x=1/t.x,n.y=1/t.y,n.z=1/t.z,n.w=1/t.w,n},i.negate=function(t,n){return n=n||new i,n.x=-t.x,n.y=-t.y,n.z=-t.z,n.w=-t.w,n},i.add=function(t,n,r){return r=r||new i,r.x=t.x+n.x,r.y=t.y+n.y,r.z=t.z+n.z,r.w=t.w+n.w,r},i.addScalar=function(t,n,r){return r=r||new i,r.x=t.x+n,r.y=t.y+n,r.z=t.z+n,r.w=t.w+n,r},i.subtract=function(t,n,r){return r=r||new i,r.x=t.x-n.x,r.y=t.y-n.y,r.z=t.z-n.z,r.w=t.w-n.w,r},i.subtractScalar=function(t,n,r){return r=r||new i,r.x=t.x-n,r.y=t.y-n,r.z=t.z-n,r.w=t.w-n,r},i.multiply=function(t,n,r){return r=r||new i,r.x=t.x*n.x,r.y=t.y*n.y,r.z=t.z*n.z,r.w=t.w*n.w,r},i.multiplyScalar=function(t,n,r){return r=r||new i,r.x=t.x*n,r.y=t.y*n,r.z=t.z*n,r.w=t.w*n,r},i.divide=function(t,n,r){return r=r||new i,r.x=t.x/n.x,r.y=t.y/n.y,r.z=t.z/n.z,r.w=t.w/n.w,r},i.divideScalar=function(t,n,r){return n=1/n,r=r||new i,r.x=t.x*n,r.y=t.y*n,r.z=t.z*n,r.w=t.w*n,r},i.multiplyAdd=function(t,n,r,s){return s=s||new i,s.x=t.x*n.x+r.x,s.y=t.y*n.y+r.y,s.z=t.z*n.z+r.z,s.w=t.w*n.w+r.w,s},i.multiplyScalarAdd=function(t,n,r,s){return s=s||new i,s.x=t.x*n+r.x,s.y=t.y*n+r.y,s.z=t.z*n+r.z,s.w=t.w*n+r.w,s},i.clamp=function(t,n,r,s){var e=t.x,h=t.y,a=t.z,u=t.w,o=n.x,c=n.y,y=n.z,x=n.w,f=r.x,w=r.y,z=r.z,l=r.w;return s=s||new i,s.x=o>e?o:e>f?f:e,s.y=c>h?c:h>w?w:h,s.z=y>a?y:a>z?z:a,s.w=x>u?x:u>l?l:u,s},i.clampScalar=function(t,n,r,s){var e=t.x,h=t.y,a=t.z,u=t.w;return s=s||new i,s.x=n>e?n:e>r?r:e,s.y=n>h?n:h>r?r:h,s.z=n>a?n:a>r?r:a,s.w=n>u?n:u>r?r:u,s},i.min=function(t,n,r){var s=t.x,e=t.y,h=t.z,a=t.w,u=n.x,o=n.y,c=n.z,y=n.w;return r=r||new i,r.x=u>s?s:u,r.y=o>e?e:o,r.z=c>h?h:c,r.w=y>a?a:y,r},i.minScalar=function(t,n,r){var s=t.x,e=t.y,h=t.z,a=t.w;return r=r||new i,r.x=n>s?s:n,r.y=n>e?e:n,r.z=n>h?h:n,r.w=n>a?a:n,r},i.max=function(t,n,r){var s=t.x,e=t.y,h=t.z,a=t.w,u=n.x,o=n.y,c=n.z,y=n.w;return r=r||new i,r.x=s>u?s:u,r.y=e>o?e:o,r.z=h>c?h:c,r.w=a>y?a:y,r},i.maxScalar=function(t,n,r){var s=t.x,e=t.y,h=t.z,a=t.w;return r=r||new i,r.x=s>n?s:n,r.y=e>n?e:n,r.z=h>n?h:n,r.w=a>n?a:n,r},i.lerp=function(t,n,r,s){var e=t.x,h=t.y,a=t.z,u=t.w;return s=s||new i,s.x=e+(n.x-e)*r,s.y=h+(n.y-h)*r,s.z=a+(n.z-a)*r,s.w=u+(n.w-u)*r,s},i.barycentric=function(t,n,r,s,e,h){var a=t.x,u=t.y,o=t.z,c=t.w;return h=h||new i,h.x=a+s*(n.x-a)+e*(r.x-a),h.y=u+s*(n.y-u)+e*(r.y-u),h.z=o+s*(n.z-o)+e*(r.z-o),h.w=c+s*(n.w-c)+e*(r.w-c),h},i.smooth=function(t,n,r,s){r=r>1?1:0>r?0:r,r=r*r*(3-2*r);var e=t.x,h=t.y,a=t.z,u=t.w;return s=s||new i,s.x=e+(n.x-e)*r,s.y=h+(n.y-h)*r,s.z=a+(n.z-a)*r,s.w=u+(n.w-u)*r,s},i.convert=function(t){return Array.isArray(t)?new i(t[0]||0,t[1]||0,t[2]||0,t[3]||0):"number"==typeof t?new i(t,t,t,t):new i(t.x||0,t.y||0,t.z||0,t.w||0)}}(window),function(t){"use strict";var i=function(){this.x=0,this.y=0,this.z=0,this.w=0};t.Quat=i,i.prototype={init:function(t,i,n,r){return this.x=t,this.y=i,this.z=n,this.w=r,this},initIdentity:function(){return this.x=0,this.y=0,this.z=0,this.w=1,this},initZero:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this},initFrom:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},initFromBuffer:function(t,i){return i=i||0,this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this},initAxisAngle:function(t,i){var n=.5*i,r=Math.sin(n);return this.x=t.x*r,this.y=t.y*r,this.z=t.z*r,this.w=Math.cos(n),this},initYawPitchRoll:function(t,i,n){var r=.5*i,s=Math.sin(r),e=Math.cos(r),h=.5*t,a=Math.sin(h),u=Math.cos(h),o=.5*n,c=Math.sin(o),y=Math.cos(o);return this.x=u*s*y+a*e*c,this.y=a*e*y-u*s*c,this.z=u*e*c-a*s*y,this.w=u*e*y+a*s*c,this},clone:function(){return new i(this.x,this.y,this.z,this.w)},copyTo:function(t,i){i=i||0,t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w},dump:function(){return[this.x,this.y,this.z,this.w]},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},length:function(){var t=this.x,i=this.y,n=this.z,r=this.w;return Math.sqrt(t*t+i*i+n*n+r*r)},lengthSquared:function(){var t=this.x,i=this.y,n=this.z,r=this.w;return t*t+i*i+n*n+r*r},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},selfNegate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},selfConjugate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},selfNormalize:function(){var t=this.x,i=this.y,n=this.z,r=this.w,s=1/Math.sqrt(t*t+i*i+n*n+r*r);return this.x=t*s,this.y=i*s,this.z=n*s,this.w=r*s,this},selfInvert:function(){var t=this.x,i=this.y,n=this.z,r=this.w,s=1/Math.sqrt(t*t+i*i+n*n+r*r);return this.x=-t*s,this.y=-i*s,this.z=-n*s,this.w=r*s,this},selfAdd:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},selfSubtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},selfMultiply:function(t){var i=this.x,n=this.y,r=this.z,s=this.w,e=t.x,h=t.y,a=t.z,u=t.w;return this.x=i*u+e*s+n*a-r*h,this.y=n*u+h*s+r*e-i*a,this.z=r*u+a*s+i*h-n*e,this.w=s*u-i*e-n*h-r*a,this},selfConcat:function(t){var i=t.x,n=t.y,r=t.z,s=t.w,e=this.x,h=this.y,a=this.z,u=this.w;return this.x=i*u+e*s+n*a-r*h,this.y=n*u+h*s+r*e-i*a,this.z=r*u+a*s+i*h-n*e,this.w=s*u-i*e-n*h-r*a,this},selfDivide:function(t){var i=this.x,n=this.y,r=this.z,s=this.w,e=t.x,h=t.y,a=t.z,u=t.w,o=1/(e*e+h*h+a*a+u*u);return e=-e*o,h=-h*o,a=-a*o,u*=o,this.x=i*u+e*s+n*a-r*h,this.y=n*u+h*s+r*e-i*a,this.z=r*u+a*s+i*h-n*e,this.w=s*u-i*e-n*h-r*a,this},transform:function(t){var i=this.x,n=this.y,r=this.z,s=this.w,e=i+i,h=n+n,a=r+r,u=s*e,o=s*h,c=s*a,y=i*e,x=i*h,f=i*a,w=n*h,z=n*a,l=n*a,d=t.x,v=t.y,p=t.z;return t.x=d*(1-w-l)+v*(x-c)+p*(f+o),t.y=d*(x+c)+v*(1-y-l)+p*(z-u),t.z=d*(f-o)+v*(z+u)+p*(1-y-w),t}},i.create=function(t,n,r,s){return void 0!==t?new i(t,n,r,s):new i(0,0,0,0)},i.zero=function(){return new i(0,0,0,0)},i.identity=function(){return new i(0,0,0,1)},i.fromAxisAngle=function(t,n){return i.identity().initAxisAngle(t,n)},i.fromYawPitchRoll=function(t,n,r){return i.identity().initYawPitchRoll(t,n,r)},i.negate=function(t,n){return n=n||new i,n.x=-t.x,n.y=-t.y,n.z=-t.z,n.w=-t.w,n},i.conjugate=function(t,n){return n=n||new i,n.x=-t.x,n.y=-t.y,n.z=-t.z,n.w=t.w,n},i.normalize=function(t,n){var r=t.x,s=t.y,e=t.z,h=t.w,a=1/Math.sqrt(r*r+s*s+e*e+h*h);return n=n||new i,n.x=r*a,n.y=s*a,n.z=e*a,n.w=h*a,n},i.invert=function(t,n){var r=t.x,s=t.y,e=t.z,h=t.w,a=1/Math.sqrt(r*r+s*s+e*e+h*h);return n=n||new i,n.x=-r*a,n.y=-s*a,n.z=-e*a,n.w=h*a,n},i.add=function(t,n,r){return r=r||new i,r.x=t.x+n.x,r.y=t.y+n.y,r.z=t.z+n.z,r.w=t.w+n.w,r},i.subtract=function(t,n,r){return r=r||new i,r.x=t.x-n.x,r.y=t.y-n.y,r.z=t.z-n.z,r.w=t.w-n.w,r},i.multiply=function(t,n,r){var s=t.x,e=t.y,h=t.z,a=t.w,u=n.x,o=n.y,c=n.z,y=n.w;return r=r||new i,r.x=s*y+u*a+e*c-h*o,r.y=e*y+o*a+h*u-s*c,r.z=h*y+c*a+s*o-e*u,r.w=a*y-s*u-e*o-h*c,r},i.concat=function(t,n,r){var s=n.x,e=n.y,h=n.z,a=n.w,u=t.x,o=t.y,c=t.z,y=t.w;return r=r||new i,r.x=s*y+u*a+e*c-h*o,r.y=e*y+o*a+h*u-s*c,r.z=h*y+c*a+s*o-e*u,r.w=a*y-s*u-e*o-h*c,r},i.divide=function(t,n,r){var s=t.x,e=t.y,h=t.z,a=t.w,u=n.x,o=n.y,c=n.z,y=n.w,x=1/(u*u+o*o+c*c+y*y);return u=-u*x,o=-o*x,c=-c*x,y*=x,r=r||new i,r.x=s*y+u*a+e*c-h*o,r.y=e*y+o*a+h*u-s*c,r.z=h*y+c*a+s*o-e*u,r.w=a*y-s*u-e*o-h*c,r},i.convert=function(t){return Array.isArray(t)?new i(t[0]||0,t[1]||0,t[2]||0,t[3]||0):"number"==typeof t?new i(t,t,t,t):new i(t.x||0,t.y||0,t.z||0,t.w||0)},i.transform=function(i,n,r){var s=i.x,e=i.y,h=i.z,a=i.w,u=s+s,o=e+e,c=h+h,y=a*u,x=a*o,f=a*c,w=s*u,z=s*o,l=s*c,d=e*o,v=e*c,p=e*c,m=n.x,M=n.y,g=n.z;return r=r||new t.Vec3,r.x=m*(1-d-p)+M*(z-f)+g*(l+x),r.y=m*(z+f)+M*(1-w-p)+g*(v-y),r.z=m*(l-x)+M*(v+y)+g*(1-w-d),null==r.w&&(r.w=1),r}}(window),function(t){"use strict";var i=t.Vec3,n=t.Float32Array,r=function(t){this.data=t||new n(16),this.right=this.data.subarray(0,3),this.up=this.data.subarray(4,7),this.backward=this.data.subarray(8,11),this.translation=this.data.subarray(12,15)};t.Mat4=r,r.prototype={init:function(t,i,n,r,s,e,h,a,u,o,c,y,x,f,w,z){var l=this.data;return l[0]=t,l[1]=i,l[2]=n,l[3]=r,l[4]=s,l[5]=e,l[6]=h,l[7]=a,l[8]=u,l[9]=o,l[10]=c,l[11]=y,l[12]=x,l[13]=f,l[14]=w,l[15]=z,this},initRowMajor:function(t,i,n,r,s,e,h,a,u,o,c,y,x,f,w,z){var l=this.data;return l[0]=t,l[1]=s,l[2]=u,l[3]=x,l[4]=i,l[5]=e,l[6]=o,l[7]=f,l[8]=n,l[9]=h,l[10]=c,l[11]=w,l[12]=r,l[13]=a,l[14]=y,l[15]=z,this},initWith:function(t){var i=this.data;return i[0]=i[1]=i[2]=i[3]=i[4]=i[5]=i[6]=i[7]=i[8]=i[9]=i[10]=i[11]=i[12]=i[13]=i[14]=i[15]=t,this},initIdentity:function(){var t=this.data;return t[0]=t[5]=t[10]=t[15]=1,t[1]=t[2]=t[3]=t[4]=t[6]=t[7]=t[8]=t[9]=t[11]=t[12]=t[13]=t[14]=0,this},initFrom:function(t){var i=this.data,n=t.data;return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],this},initFromBuffer:function(t,i){i=i||0;var n=this.data;return n[0]=t[i],n[1]=t[i+1],n[2]=t[i+2],n[3]=t[i+3],n[4]=t[i+4],n[5]=t[i+5],n[6]=t[i+6],n[7]=t[i+7],n[8]=t[i+8],n[9]=t[i+9],n[10]=t[i+10],n[11]=t[i+11],n[12]=t[i+12],n[13]=t[i+13],n[14]=t[i+14],n[15]=t[i+15],this},initFromQuaternion:function(t){var i=t.x,n=t.y,r=t.z,s=t.w,e=i*i,h=n*n,a=r*r,u=i*n,o=r*s,c=r*i,y=n*s,x=n*r,f=i*s;return this.initRowMajor(1-2*(h+a),2*(u-o),2*(c+y),0,2*(u+o),1-2*(a+e),2*(x-f),0,2*(c-y),2*(x+f),1-2*(h+e),0,0,0,0,1)},initAxisAngle:function(t,i){var n=.5*i,r=Math.sin(n),s=t.x*r,e=t.y*r,h=t.z*r,a=Math.cos(n),u=s*s,o=e*e,c=h*h,y=s*e,x=h*a,f=h*s,w=e*a,z=e*h,l=s*a;return this.initRowMajor(1-2*(o+c),2*(y-x),2*(f+w),0,2*(y+x),1-2*(c+u),2*(z-l),0,2*(f-w),2*(z+l),1-2*(o+u),0,0,0,0,1)},initYawPitchRoll:function(t,i,n){var r=.5*n,s=Math.sin(r),e=Math.cos(r),h=.5*i,a=Math.sin(h),u=Math.cos(h),o=.5*t,c=Math.sin(o),y=Math.cos(o),x=y*a*e+c*u*s,f=c*u*e-y*a*s,w=y*u*s-c*a*e,z=y*u*e+c*a*s,l=x*x,d=f*f,v=w*w,p=x*f,m=w*z,M=w*x,g=f*z,S=f*w,b=x*z;return this.initRowMajor(1-2*(d+v),2*(p-m),2*(M+g),0,2*(p+m),1-2*(v+l),2*(S-b),0,2*(M-g),2*(S+b),1-2*(d+l),0,0,0,0,1)},initRotationX:function(t){var i=Math.cos(t),n=Math.sin(t);return this.initRowMajor(1,0,0,0,0,i,-n,0,0,n,i,0,0,0,0,1)},initRotationY:function(t){var i=Math.cos(t),n=Math.sin(t);return this.initRowMajor(i,0,n,0,0,1,0,0,-n,0,i,0,0,0,0,1)},initRotationZ:function(t){var i=Math.cos(t),n=Math.sin(t);return this.initRowMajor(i,-n,0,0,n,i,0,0,0,0,1,0,0,0,0,1)},initTranslation:function(t,i,n){return this.initRowMajor(1,0,0,t,0,1,0,i,0,0,1,n,0,0,0,1)},initScale:function(t,i,n){return this.initRowMajor(t,0,0,0,0,i,0,0,0,0,n,0,0,0,0,1)},initLookAt:function(t,i,n){var r=t.x-i.x,s=t.y-i.y,e=t.z-i.z,h=n.y*e-n.z*s,a=n.z*r-n.x*e,u=n.x*s-n.y*r,o=1/Math.sqrt(r*r+s*s+e*e);r*=o,s*=o,e*=o,o=1/Math.sqrt(h*h+a*a+u*u),h*=o,a*=o,u*=o;var c=s*u-e*a,y=e*h-r*u,x=r*a-s*h;return this.initRowMajor(h,c,r,t.x,a,y,s,t.y,u,x,e,t.z,0,0,0,1)},initWorld:function(t,i,n){var r=i.x,s=i.y,e=i.z,h=1/Math.sqrt(r*r+s*s+e*e),a=-r*h,u=-s*h,o=-e*h;r=n.y*o-n.z*u,s=n.z*a-n.x*o,e=n.x*u-n.y*a,h=1/Math.sqrt(r*r+s*s+e*e);var c=r*h,y=s*h,x=e*h;return r=u*x-o*y,s=o*c-a*x,e=a*y-u*c,this.initRowMajor(c,r,a,t.x,y,s,u,t.y,x,e,o,t.z,0,0,0,1)},initPerspectiveFieldOfView:function(t,i,n,r){var s=1/Math.tan(.5*t);return this.initRowMajor(s/i,0,0,0,0,s,0,0,0,0,-(r+n)/(r-n),-(2*r*n)/(r-n),0,0,-1,0)},initPerspective:function(t,i,n,r){return this.initRowMajor(n/t,0,0,0,0,n/i,0,0,0,0,-(r+n)/(r-n),-(2*r*n)/(r-n),0,0,-1,0)},initPerspectiveOffCenter:function(t,i,n,r,s,e){return this.initRowMajor(2*s/(i-t),0,(i+t)/(i-t),0,0,2*s/(r-n),(r+n)/(r-n),0,0,0,-(e+s)/(e-s),-(2*e*s)/(e-s),0,0,-1,0)},initOrthographic:function(t,i,n,r){return this.initRowMajor(1/t,0,0,0,0,1/i,0,0,0,0,-2/(r-n),-(r+n)/(r-n),0,0,0,1)},initOrthographicOffCenter:function(t,i,n,r,s,e){return this.initRowMajor(2/(i-t),0,0,-(i+t)/(i-t),0,2/(r-n),0,-(r+n)/(r-n),0,0,-2/(e-s),-(e+s)/(e-s),0,0,0,1)},clone:function(){var t=this.data;return(new r).init(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},copyTo:function(t,i){i=i||0;var n=this.data;return t[i]=n[0],t[i+1]=n[1],t[i+2]=n[2],t[i+3]=n[3],t[i+4]=n[4],t[i+5]=n[5],t[i+6]=n[6],t[i+7]=n[7],t[i+8]=n[8],t[i+9]=n[9],t[i+10]=n[10],t[i+11]=n[11],t[i+12]=n[12],t[i+13]=n[13],t[i+14]=n[14],t[i+15]=n[15],t},dump:function(){var t=[];return this.copyTo(t),t},equals:function(t){var i=this.data,n=t.data;return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]&&i[4]===n[4]&&i[5]===n[5]&&i[6]===n[6]&&i[7]===n[7]&&i[8]===n[8]&&i[9]===n[9]&&i[10]===n[10]&&i[11]===n[11]&&i[12]===n[12]&&i[13]===n[13]&&i[14]===n[14]&&i[15]===n[15]},getForward:function(t){return(t||new i).init(-this.backward[0],-this.backward[1],-this.backward[2])},getBackward:function(t){return(t||new i).init(this.backward[0],this.backward[1],this.backward[2])},getRight:function(t){return(t||new i).init(this.right[0],this.right[1],this.right[2])},getLeft:function(t){return(t||new i).init(-this.right[0],-this.right[1],-this.right[2])},getUp:function(t){return(t||new i).init(this.up[0],this.up[1],this.up[2])},getDown:function(t){return(t||new i).init(-this.up[0],-this.up[1],-this.up[2])},getTranslation:function(t){return(t||new i).init(this.translation[0],this.translation[1],this.translation[2])},getScale:function(t){return(t||new i).init(this.data[0],this.data[5],this.data[10])},copyForward:function(t){return t[0]=-this.backward[0],t[1]=-this.backward[1],t[2]=-this.backward[2],t},copyBackward:function(t){return t[0]=this.backward[0],t[1]=this.backward[1],t[2]=this.backward[2],t},copyRight:function(t){return t[0]=this.right[0],t[1]=this.right[1],t[2]=this.right[2],t},copyLeft:function(t){return t[0]=-this.right[0],t[1]=-this.right[1],t[2]=-this.right[2],t},copyUp:function(t){return t[0]=this.up[0],t[1]=this.up[1],t[2]=this.up[2],t},copyDown:function(t){return t[0]=-this.up[0],t[1]=-this.up[1],t[2]=-this.up[2],t},copyTranslation:function(t){return t[0]=this.translation[0],t[1]=this.translation[1],t[2]=this.translation[2],t},copyScale:function(t){return t[0]=this.data[0],t[1]=this.data[5],t[2]=this.data[10],t},setForward:function(t){return this.backward[0]=-t.x,this.backward[1]=-t.y,this.backward[2]=-t.z,this},setBackward:function(t){return this.backward[0]=t.x,this.backward[1]=t.y,this.backward[2]=t.z,this},setRight:function(t){return this.right[0]=t.x,this.right[1]=t.y,this.right[2]=t.z,this},setLeft:function(t){return this.right[0]=-t.x,this.right[1]=-t.y,this.right[2]=-t.z,this},setUp:function(t){return this.up[0]=t.x,this.up[1]=t.y,this.up[2]=t.z,this},setDown:function(t){return this.up[0]=-t.x,this.up[1]=-t.y,this.up[2]=-t.z,this},setTranslation:function(t){return this.translation[0]=t.x,this.translation[1]=t.y,this.translation[2]=t.z,this},setScale:function(t){return this.data[0]=t.x,this.data[5]=t.y,this.data[10]=t.z,this},determinant:function(){var t=this.data,i=t[0],n=t[4],r=t[8],s=t[12],e=t[1],h=t[5],a=t[9],u=t[13],o=t[2],c=t[6],y=t[10],x=t[14],f=t[3],w=t[7],z=t[11],l=t[15],d=y*l-z*x,v=a*l-z*u,p=a*x-y*u,m=r*l-z*s,M=r*x-y*s,g=r*u-a*s,S=h*d-c*v+w*p,b=n*d-c*m+w*M,A=n*v-h*m+w*g,R=n*p-h*M+c*g;return i*S-e*b+o*A-f*R},selfTranspose:function(){var t=this.data,i=t[1];return t[1]=t[4],t[4]=i,i=t[2],t[2]=t[8],t[8]=i,i=t[3],t[3]=t[12],t[12]=i,i=t[6],t[6]=t[9],t[9]=i,i=t[7],t[7]=t[13],t[13]=i,i=t[11],t[11]=t[14],t[14]=i,this},selfInvert:function(){var t=this.data,i=this.data,n=t[0],r=t[4],s=t[8],e=t[12],h=t[1],a=t[5],u=t[9],o=t[13],c=t[2],y=t[6],x=t[10],f=t[14],w=t[3],z=t[7],l=t[11],d=t[15],v=x*d-l*f,p=u*d-l*o,m=u*f-x*o,M=s*d-l*e,g=s*f-x*e,S=s*o-u*e,b=a*v-y*p+z*m,A=r*v-y*M+z*g,R=r*p-a*M+z*S,F=r*m-a*g+y*S,q=1/(n*b-h*A+c*R-w*F);i[0]=b*q,i[4]=-A*q,i[8]=R*q,i[12]=-F*q,i[1]=-(h*v-c*p+w*m)*q,i[5]=(n*v-c*M+w*g)*q,i[9]=-(n*p-h*M+w*S)*q,i[13]=(n*m-h*g+c*S)*q;var k=y*d-z*f,j=a*d-z*o,T=a*f-y*o,O=r*d-z*e,P=r*f-y*e,C=r*o-a*e;return i[2]=(h*k-c*j+w*T)*q,i[6]=-(n*k-c*O+w*P)*q,i[10]=(n*j-h*O+w*C)*q,i[14]=-(n*T-h*P+c*C)*q,k=y*l-z*x,j=a*l-z*u,T=a*x-y*u,O=r*l-z*s,P=r*x-y*s,C=r*u-a*s,i[3]=-(h*k-c*j+w*T)*q,i[7]=(n*k-c*O+w*P)*q,i[11]=-(n*j-h*O+w*C)*q,i[15]=(n*T-h*P+c*C)*q,this},selfNegate:function(){var t=this.data;return t[0]=-t[0],t[1]=-t[1],t[2]=-t[2],t[3]=-t[3],t[4]=-t[4],t[5]=-t[5],t[6]=-t[6],t[7]=-t[7],t[8]=-t[8],t[9]=-t[9],t[10]=-t[10],t[11]=-t[11],t[12]=-t[12],t[13]=-t[13],t[14]=-t[14],t[15]=-t[15],this},selfAdd:function(t){var i=this.data,n=t.data;return i[0]+=n[0],i[1]+=n[1],i[2]+=n[2],i[3]+=n[3],i[4]+=n[4],i[5]+=n[5],i[6]+=n[6],i[7]+=n[7],i[8]+=n[8],i[9]+=n[9],i[10]+=n[10],i[11]+=n[11],i[12]+=n[12],i[13]+=n[13],i[14]+=n[14],i[15]+=n[15],this},selfAddScalar:function(t){var i=this.data;return i[0]+=t,i[1]+=t,i[2]+=t,i[3]+=t,i[4]+=t,i[5]+=t,i[6]+=t,i[7]+=t,i[8]+=t,i[9]+=t,i[10]+=t,i[11]+=t,i[12]+=t,i[13]+=t,i[14]+=t,i[15]+=t,this},selfSubtract:function(t){var i=this.data,n=t.data;return i[0]-=n[0],i[1]-=n[1],i[2]-=n[2],i[3]-=n[3],i[4]-=n[4],i[5]-=n[5],i[6]-=n[6],i[7]-=n[7],i[8]-=n[8],i[9]-=n[9],i[10]-=n[10],i[11]-=n[11],i[12]-=n[12],i[13]-=n[13],i[14]-=n[14],i[15]-=n[15],this},selfSubtractScalar:function(t){var i=this.data;return i[0]-=t,i[1]-=t,i[2]-=t,i[3]-=t,i[4]-=t,i[5]-=t,i[6]-=t,i[7]-=t,i[8]-=t,i[9]-=t,i[10]-=t,i[11]-=t,i[12]-=t,i[13]-=t,i[14]-=t,i[15]-=t,this},selfMultiply:function(t){var i=t.data,n=this.data,r=this.data,s=i[0],e=i[1],h=i[2],a=i[3],u=i[4],o=i[5],c=i[6],y=i[7],x=i[8],f=i[9],w=i[10],z=i[11],l=i[12],d=i[13],v=i[14],p=i[15],m=n[0],M=n[1],g=n[2],S=n[3],b=n[4],A=n[5],R=n[6],F=n[7],q=n[8],k=n[9],j=n[10],T=n[11],O=n[12],P=n[13],C=n[14],B=n[15];return r[0]=m*s+M*u+g*x+S*l,r[1]=m*e+M*o+g*f+S*d,r[2]=m*h+M*c+g*w+S*v,r[3]=m*a+M*y+g*z+S*p,r[4]=b*s+A*u+R*x+F*l,r[5]=b*e+A*o+R*f+F*d,r[6]=b*h+A*c+R*w+F*v,r[7]=b*a+A*y+R*z+F*p,r[8]=q*s+k*u+j*x+T*l,r[9]=q*e+k*o+j*f+T*d,r[10]=q*h+k*c+j*w+T*v,r[11]=q*a+k*y+j*z+T*p,r[12]=O*s+P*u+C*x+B*l,r[13]=O*e+P*o+C*f+B*d,r[14]=O*h+P*c+C*w+B*v,r[15]=O*a+P*y+C*z+B*p,this},selfConcat:function(t){var i=this.data,n=t.data,r=this.data,s=i[0],e=i[1],h=i[2],a=i[3],u=i[4],o=i[5],c=i[6],y=i[7],x=i[8],f=i[9],w=i[10],z=i[11],l=i[12],d=i[13],v=i[14],p=i[15],m=n[0],M=n[1],g=n[2],S=n[3],b=n[4],A=n[5],R=n[6],F=n[7],q=n[8],k=n[9],j=n[10],T=n[11],O=n[12],P=n[13],C=n[14],B=n[15];return r[0]=m*s+M*u+g*x+S*l,r[1]=m*e+M*o+g*f+S*d,r[2]=m*h+M*c+g*w+S*v,r[3]=m*a+M*y+g*z+S*p,r[4]=b*s+A*u+R*x+F*l,r[5]=b*e+A*o+R*f+F*d,r[6]=b*h+A*c+R*w+F*v,r[7]=b*a+A*y+R*z+F*p,r[8]=q*s+k*u+j*x+T*l,r[9]=q*e+k*o+j*f+T*d,r[10]=q*h+k*c+j*w+T*v,r[11]=q*a+k*y+j*z+T*p,r[12]=O*s+P*u+C*x+B*l,r[13]=O*e+P*o+C*f+B*d,r[14]=O*h+P*c+C*w+B*v,r[15]=O*a+P*y+C*z+B*p,this},selfMultiplyScalar:function(t){var i=this.data;return i[0]*=t,i[1]*=t,i[2]*=t,i[3]*=t,i[4]*=t,i[5]*=t,i[6]*=t,i[7]*=t,i[8]*=t,i[9]*=t,i[10]*=t,i[11]*=t,i[12]*=t,i[13]*=t,i[14]*=t,i[15]*=t,this},selfDivide:function(t){var i=this.data,n=t.data;
return i[0]/=n[0],i[1]/=n[1],i[2]/=n[2],i[3]/=n[3],i[4]/=n[4],i[5]/=n[5],i[6]/=n[6],i[7]/=n[7],i[8]/=n[8],i[9]/=n[9],i[10]/=n[10],i[11]/=n[11],i[12]/=n[12],i[13]/=n[13],i[14]/=n[14],i[15]/=n[15],this},selfDivideScalar:function(t){t=1/t;var i=this.data;return i[0]*=t,i[1]*=t,i[2]*=t,i[3]*=t,i[4]*=t,i[5]*=t,i[6]*=t,i[7]*=t,i[8]*=t,i[9]*=t,i[10]*=t,i[11]*=t,i[12]*=t,i[13]*=t,i[14]*=t,i[15]*=t,this},transform:function(t){var i=t.x||0,n=t.y||0,r=t.z||0,s=null!=t.w?t.w:1,e=this.data;return t.x=i*e[0]+n*e[4]+r*e[8]+s*e[12],t.y=i*e[1]+n*e[5]+r*e[9]+s*e[13],null!=t.z&&(t.z=i*e[2]+n*e[6]+r*e[10]+s*e[14],null!=t.w&&(t.w=i*e[3]+n*e[7]+r*e[11]+s*e[15])),t},transformNormal:function(t){var i=t.x||0,n=t.y||0,r=t.z||0,s=this.data;return t.x=i*s[0]+n*s[4]+r*s[8],t.y=i*s[1]+n*s[5]+r*s[9],null!=t.z&&(t.z=i*s[2]+n*s[6]+r*s[10]),t},transformV2Buffer:function(t,i,n,r){var s,e,h=this.data;for(i=i||0,n=void 0===n?2:n,r=void 0===r?t.length/n:r;r>0;)s=t[i],e=t[i+1],t[i]=s*h[0]+e*h[4]+h[8]+h[12],t[i+1]=s*h[1]+e*h[5]+h[9]+h[13],i+=n},transformV3Buffer:function(t,i,n,r){var s,e,h,a=this.data;for(i=i||0,n=void 0===n?3:n,r=void 0===r?t.length/n:r;r>0;)s=t[i],e=t[i+1],h=t[i+2],t[i]=s*a[0]+e*a[4]+h*a[8]+a[12],t[i+1]=s*a[1]+e*a[5]+h*a[9]+a[13],t[i+2]=s*a[2]+e*a[6]+h*a[10]+a[14],i+=n},transformV4Buffer:function(t,i,n,r){var s,e,h,a,u=this.data;for(i=i||0,n=void 0===n?4:n,r=void 0===r?t.length/n:r;r>0;)s=t[i],e=t[i+1],h=t[i+2],a=t[i+3],t[i]=s*u[0]+e*u[4]+h*u[8]+a*u[12],t[i+1]=s*u[1]+e*u[5]+h*u[9]+a*u[13],t[i+2]=s*u[2]+e*u[6]+h*u[10]+a*u[14],t[i+3]=s*u[3]+e*u[7]+h*u[11]+a*u[15],i+=n},transformNormalBuffer:function(t,i,n,r){var s,e,h,a=this.data;for(i=i||0,n=void 0===n?2:n,r=void 0===r?t.length/n:r;r>0;)s=t[i],e=t[i+1],h=t[i+2],t[i]=s*a[0]+e*a[4]+h*a[8],t[i+1]=s*a[1]+e*a[5]+h*a[9],t[i+2]=s*a[2]+e*a[6]+h*a[10],i+=n}},r.transpose=function(t,i){var n=t.data;return(i||new r).init(n[0],n[4],n[8],n[12],n[1],n[5],n[9],n[13],n[2],n[6],n[10],n[14],n[3],n[7],n[11],n[15])},r.invert=function(t,i){i=i||new r;var n=t.data,s=i.data,e=n[0],h=n[4],a=n[8],u=n[12],o=n[1],c=n[5],y=n[9],x=n[13],f=n[2],w=n[6],z=n[10],l=n[14],d=n[3],v=n[7],p=n[11],m=n[15],M=z*m-p*l,g=y*m-p*x,S=y*l-z*x,b=a*m-p*u,A=a*l-z*u,R=a*x-y*u,F=c*M-w*g+v*S,q=h*M-w*b+v*A,k=h*g-c*b+v*R,j=h*S-c*A+w*R,T=1/(e*F-o*q+f*k-d*j);s[0]=F*T,s[4]=-q*T,s[8]=k*T,s[12]=-j*T,s[1]=-(o*M-f*g+d*S)*T,s[5]=(e*M-f*b+d*A)*T,s[9]=-(e*g-o*b+d*R)*T,s[13]=(e*S-o*A+f*R)*T;var O=w*m-v*l,P=c*m-v*x,C=c*l-w*x,B=h*m-v*u,D=h*l-w*u,N=h*x-c*u;return s[2]=(o*O-f*P+d*C)*T,s[6]=-(e*O-f*B+d*D)*T,s[10]=(e*P-o*B+d*N)*T,s[14]=-(e*C-o*D+f*N)*T,O=w*p-v*z,P=c*p-v*y,C=c*z-w*y,B=h*p-v*a,D=h*z-w*a,N=h*y-c*a,s[3]=-(o*O-f*P+d*C)*T,s[7]=(e*O-f*B+d*D)*T,s[11]=-(e*P-o*B+d*N)*T,s[15]=(e*C-o*D+f*N)*T,i},r.negate=function(t,i){i=i||new r;var n=t.data,s=i.data;return s[0]=-n[0],s[1]=-n[1],s[2]=-n[2],s[3]=-n[3],s[4]=-n[4],s[5]=-n[5],s[6]=-n[6],s[7]=-n[7],s[8]=-n[8],s[9]=-n[9],s[10]=-n[10],s[11]=-n[11],s[12]=-n[12],s[13]=-n[13],s[14]=-n[14],s[15]=-n[15],i},r.add=function(t,i,n){n=n||new r;var s=t.data,e=i.data,h=n.data;return h[0]=s[0]+e[0],h[1]=s[1]+e[1],h[2]=s[2]+e[2],h[3]=s[3]+e[3],h[4]=s[4]+e[4],h[5]=s[5]+e[5],h[6]=s[6]+e[6],h[7]=s[7]+e[7],h[8]=s[8]+e[8],h[9]=s[9]+e[9],h[10]=s[10]+e[10],h[11]=s[11]+e[11],h[12]=s[12]+e[12],h[13]=s[13]+e[13],h[14]=s[14]+e[14],h[15]=s[15]+e[15],n},r.addScalar=function(t,i,n){n=n||new r;var s=t.data,e=n.data;return e[0]=s[0]+i,e[1]=s[1]+i,e[2]=s[2]+i,e[3]=s[3]+i,e[4]=s[4]+i,e[5]=s[5]+i,e[6]=s[6]+i,e[7]=s[7]+i,e[8]=s[8]+i,e[9]=s[9]+i,e[10]=s[10]+i,e[11]=s[11]+i,e[12]=s[12]+i,e[13]=s[13]+i,e[14]=s[14]+i,e[15]=s[15]+i,n},r.subtract=function(t,i,n){n=n||new r;var s=t.data,e=i.data,h=n.data;return h[0]=s[0]-e[0],h[1]=s[1]-e[1],h[2]=s[2]-e[2],h[3]=s[3]-e[3],h[4]=s[4]-e[4],h[5]=s[5]-e[5],h[6]=s[6]-e[6],h[7]=s[7]-e[7],h[8]=s[8]-e[8],h[9]=s[9]-e[9],h[10]=s[10]-e[10],h[11]=s[11]-e[11],h[12]=s[12]-e[12],h[13]=s[13]-e[13],h[14]=s[14]-e[14],h[15]=s[15]-e[15],n},r.subtractScalar=function(t,i,n){n=n||new r;var s=t.data,e=n.data;return e[0]=s[0]-i,e[1]=s[1]-i,e[2]=s[2]-i,e[3]=s[3]-i,e[4]=s[4]-i,e[5]=s[5]-i,e[6]=s[6]-i,e[7]=s[7]-i,e[8]=s[8]-i,e[9]=s[9]-i,e[10]=s[10]-i,e[11]=s[11]-i,e[12]=s[12]-i,e[13]=s[13]-i,e[14]=s[14]-i,e[15]=s[15]-i,n},r.multiply=function(t,i,n){n=n||new r;var s=i.data,e=t.data,h=n.data,a=s[0],u=s[1],o=s[2],c=s[3],y=s[4],x=s[5],f=s[6],w=s[7],z=s[8],l=s[9],d=s[10],v=s[11],p=s[12],m=s[13],M=s[14],g=s[15],S=e[0],b=e[1],A=e[2],R=e[3],F=e[4],q=e[5],k=e[6],j=e[7],T=e[8],O=e[9],P=e[10],C=e[11],B=e[12],D=e[13],N=e[14],V=e[15];return h[0]=S*a+b*y+A*z+R*p,h[1]=S*u+b*x+A*l+R*m,h[2]=S*o+b*f+A*d+R*M,h[3]=S*c+b*w+A*v+R*g,h[4]=F*a+q*y+k*z+j*p,h[5]=F*u+q*x+k*l+j*m,h[6]=F*o+q*f+k*d+j*M,h[7]=F*c+q*w+k*v+j*g,h[8]=T*a+O*y+P*z+C*p,h[9]=T*u+O*x+P*l+C*m,h[10]=T*o+O*f+P*d+C*M,h[11]=T*c+O*w+P*v+C*g,h[12]=B*a+D*y+N*z+V*p,h[13]=B*u+D*x+N*l+V*m,h[14]=B*o+D*f+N*d+V*M,h[15]=B*c+D*w+N*v+V*g,n},r.concat=function(t,i,n){n=n||new r;var s=t.data,e=i.data,h=n.data,a=s[0],u=s[1],o=s[2],c=s[3],y=s[4],x=s[5],f=s[6],w=s[7],z=s[8],l=s[9],d=s[10],v=s[11],p=s[12],m=s[13],M=s[14],g=s[15],S=e[0],b=e[1],A=e[2],R=e[3],F=e[4],q=e[5],k=e[6],j=e[7],T=e[8],O=e[9],P=e[10],C=e[11],B=e[12],D=e[13],N=e[14],V=e[15];return h[0]=S*a+b*y+A*z+R*p,h[1]=S*u+b*x+A*l+R*m,h[2]=S*o+b*f+A*d+R*M,h[3]=S*c+b*w+A*v+R*g,h[4]=F*a+q*y+k*z+j*p,h[5]=F*u+q*x+k*l+j*m,h[6]=F*o+q*f+k*d+j*M,h[7]=F*c+q*w+k*v+j*g,h[8]=T*a+O*y+P*z+C*p,h[9]=T*u+O*x+P*l+C*m,h[10]=T*o+O*f+P*d+C*M,h[11]=T*c+O*w+P*v+C*g,h[12]=B*a+D*y+N*z+V*p,h[13]=B*u+D*x+N*l+V*m,h[14]=B*o+D*f+N*d+V*M,h[15]=B*c+D*w+N*v+V*g,this},r.concatChain=function(){var t,i=arguments[0].clone();for(t=1;t<arguments.length;t+=1)r.concat(arguments[t],i,i);return i},r.multiplyChain=function(){var t,i=arguments[0].clone();for(t=1;t<arguments.length;t+=1)r.multiply(arguments[t],i,i);return i},r.multiplyScalar=function(t,i,n){n=n||new r;var s=t.data,e=n.data;return e[0]=s[0]*i,e[1]=s[1]*i,e[2]=s[2]*i,e[3]=s[3]*i,e[4]=s[4]*i,e[5]=s[5]*i,e[6]=s[6]*i,e[7]=s[7]*i,e[8]=s[8]*i,e[9]=s[9]*i,e[10]=s[10]*i,e[11]=s[11]*i,e[12]=s[12]*i,e[13]=s[13]*i,e[14]=s[14]*i,e[15]=s[15]*i,n},r.divide=function(t,i,n){n=n||new r;var s=t.data,e=i.data,h=n.data;return h[0]=s[0]*e[0],h[1]=s[1]*e[1],h[2]=s[2]*e[2],h[3]=s[3]*e[3],h[4]=s[4]*e[4],h[5]=s[5]*e[5],h[6]=s[6]*e[6],h[7]=s[7]*e[7],h[8]=s[8]*e[8],h[9]=s[9]*e[9],h[10]=s[10]*e[10],h[11]=s[11]*e[11],h[12]=s[12]*e[12],h[13]=s[13]*e[13],h[14]=s[14]*e[14],h[15]=s[15]*e[15],n},r.divideScalar=function(t,i,n){n=n||new r;var s=t.data,e=n.data;return i=1/i,e[0]=s[0]*i,e[1]=s[1]*i,e[2]=s[2]*i,e[3]=s[3]*i,e[4]=s[4]*i,e[5]=s[5]*i,e[6]=s[6]*i,e[7]=s[7]*i,e[8]=s[8]*i,e[9]=s[9]*i,e[10]=s[10]*i,e[11]=s[11]*i,e[12]=s[12]*i,e[13]=s[13]*i,e[14]=s[14]*i,e[15]=s[15]*i,n},r.lerp=function(t,i,n,s){s=s||new r;var e=t.data,h=i.data,a=s.data;return a[0]=e[0]+(h[0]-e[0])*n,a[1]=e[1]+(h[1]-e[1])*n,a[2]=e[2]+(h[2]-e[2])*n,a[3]=e[3]+(h[3]-e[3])*n,a[4]=e[4]+(h[4]-e[4])*n,a[5]=e[5]+(h[5]-e[5])*n,a[6]=e[6]+(h[6]-e[6])*n,a[7]=e[7]+(h[7]-e[7])*n,a[8]=e[8]+(h[8]-e[8])*n,a[9]=e[9]+(h[9]-e[9])*n,a[10]=e[10]+(h[10]-e[10])*n,a[11]=e[11]+(h[11]-e[11])*n,a[12]=e[12]+(h[12]-e[12])*n,a[13]=e[13]+(h[13]-e[13])*n,a[14]=e[14]+(h[14]-e[14])*n,a[15]=e[15]+(h[15]-e[15])*n,s},r.zero=function(){return new r},r.identity=function(){var t=new r,i=t.data;return i[0]=i[5]=i[10]=i[15]=1,t},r.create=function(t,i,n,s,e,h,a,u,o,c,y,x,f,w,z,l){var d=new r,v=d.data;return void 0!==t&&(v[0]=t,v[1]=i,v[2]=n,v[3]=s,v[4]=e,v[5]=h,v[6]=a,v[7]=u,v[8]=o,v[9]=c,v[10]=y,v[11]=x,v[12]=f,v[13]=w,v[14]=z,v[15]=l),d},r.createRowMajor=function(t,i,n,s,e,h,a,u,o,c,y,x,f,w,z,l){var d=new r,v=d.data;return v[0]=t,v[1]=e,v[2]=o,v[3]=f,v[4]=i,v[5]=h,v[6]=c,v[7]=w,v[8]=n,v[9]=a,v[10]=y,v[11]=z,v[12]=s,v[13]=u,v[14]=x,v[15]=l,d},r.createScale=function(t,i,n){return(new r).initScale(t,i,n)},r.createTranslation=function(t,i,n){return(new r).initTranslation(t,i,n)},r.createLookAt=function(t,i,n){return(new r).initLookAt(t,i,n)},r.createWorld=function(t,i,n){return(new r).initWorld(t,i,n)},r.createPerspectiveFieldOfView=function(t,i,n,s){return(new r).initPerspectiveFieldOfView(t,i,n,s)},r.createPerspective=function(t,i,n,s){return(new r).initPerspective(t,i,n,s)},r.createPerspectiveOffCenter=function(t,i,n,s,e,h){return(new r).initPerspectiveOffCenter(t,i,n,s,e,h)},r.createOrthographic=function(t,i,n,s){return(new r).initOrthographic(t,i,n,s)},r.createOrthographicOffCenter=function(t,i,n,s,e,h){return(new r).initOrthographicOffCenter(t,i,n,s,e,h)},r.createRotationX=function(t){return(new r).initRotationX(t)},r.createRotationY=function(t){return(new r).initRotationY(t)},r.createRotationZ=function(t){return(new r).initRotationZ(t)},r.createAxisAngle=function(t,i){return(new r).initAxisAngle(t,i)},r.createYawPitchRoll=function(t,i,n){return(new r).initYawPitchRoll(t,i,n)},r.prettyString=function(t){var i=t.data;return[[i[0].toFixed(3),i[4].toFixed(3),i[8].toFixed(3),i[12].toFixed(3)].join(", "),[i[1].toFixed(3),i[5].toFixed(3),i[9].toFixed(3),i[13].toFixed(3)].join(", "),[i[2].toFixed(3),i[6].toFixed(3),i[10].toFixed(3),i[14].toFixed(3)].join(", "),[i[3].toFixed(3),i[7].toFixed(3),i[11].toFixed(3),i[15].toFixed(3)].join(", ")].join("\n")}}(window);